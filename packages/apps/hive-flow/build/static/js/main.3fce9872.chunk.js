(this["webpackJsonp@hexhive-apps/flow"]=this["webpackJsonp@hexhive-apps/flow"]||[]).push([[0],{102:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=new Array(t).join("0");return(n+e).slice(-t)},i=function(e){if(0===e.indexOf("#")&&(e=e.slice(1)),3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),6!==e.length)throw new Error("Invalid HEX color.");var t=(255-parseInt(e.slice(0,2),16)).toString(16),n=(255-parseInt(e.slice(2,4),16)).toString(16),i=(255-parseInt(e.slice(4,6),16)).toString(16);return"#"+o(t)+o(n)+o(i)},a=function(e){return function(e){var t=(16777215&e).toString(16).toUpperCase();return"#"+("00000".substring(0,6-t.length)+t)}(function(e){for(var t=0,n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return t}(e))}},243:function(e,t,n){},244:function(e,t,n){},34:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return h}));var o=n(9),i=n.n(o),a=n(15),r=n(232),c=n(22),l=function(){var e=Object(a.a)(i.a.mark((function e(t,n){var o,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=window.sessionStorage.getItem("CREDENTIALS_TOKEN"),e.next=3,fetch(void 0!=Object({NODE_ENV:"production",PUBLIC_URL:"/dashboard/flow",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/dashboard/flow",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API,"/graphql"):"/graphql",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+o},body:JSON.stringify({query:t,variables:n}),mode:"cors"});case 3:return a=e.sent,e.next=6,a.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),s=Object(c.f)({schema:{query:{__typename:{__type:"String!"},ProjectById:{__type:"Project",__args:{id:"ID"}},ProjectMany:{__type:"[Project]",__args:{status:"String",startDate:"Date",endDate:"Date"}},UserMany:{__type:"[User]"},FileMany:{__type:"[File]"},FileByProject:{__type:"[File]",__args:{id:"String"}},QuoteById:{__type:"Quote",__args:{id:"ID"}},QuoteMany:{__type:"[Quote]",__args:{status:"String",startDate:"Date",endDate:"Date"}},EquipmentById:{__type:"Equipment",__args:{id:"ID"}},EquipmentMany:{__type:"[Equipment]",__args:{status:"String"}},ScheduleById:{__type:"ScheduleItem",__args:{id:"ID"}},ScheduleMany:{__type:"[ScheduleItem]",__args:{status:"String",startDate:"Date",endDate:"Date"}},PeopleById:{__type:"People",__args:{id:"ID"}},PeopleMany:{__type:"[People]",__args:{status:"String"}}},mutation:{__typename:{__type:"String!"},addProject:{__type:"Project",__args:{project:"ProjectInput"}},updateProject:{__type:"Project",__args:{id:"String",project:"ProjectInput"}},removeFileFromProject:{__type:"Boolean",__args:{project:"String",id:"String"}},updateFile:{__type:"File",__args:{id:"String",name:"String",status:"String"}},updateFiles:{__type:"[File]",__args:{ids:"[String]",status:"String"}},removeProject:{__type:"Boolean"},createScheduleItem:{__type:"ScheduleItem",__args:{item:"ScheduleItemInput"}},updateScheduleItem:{__type:"ScheduleItem",__args:{id:"String",item:"ScheduleItemInput"}}},subscription:{},Project:{__typename:{__type:"String!"},id:{__type:"ID"},name:{__type:"String"},files:{__type:"[File]"},status:{__type:"String"},startDate:{__type:"Date"},endDate:{__type:"Date"}},File:{__typename:{__type:"String!"},id:{__type:"ID"},cid:{__type:"String"},name:{__type:"String"},extension:{__type:"String"},mimeType:{__type:"String"},timestamp:{__type:"Date"},status:{__type:"String"},owner:{__type:"User"}},User:{__typename:{__type:"String!"},id:{__type:"ID"},name:{__type:"String"}},Quote:{__typename:{__type:"String!"},id:{__type:"ID"},name:{__type:"String"},customer:{__type:"String"},date:{__type:"Date"},status:{__type:"String"},price:{__type:"Float"}},Equipment:{__typename:{__type:"String!"},id:{__type:"ID"},name:{__type:"String"},registration:{__type:"String"},status:{__type:"String"}},ScheduleItem:{__typename:{__type:"String!"},id:{__type:"ID"},date:{__type:"Date"},project:{__type:"Project"},people:{__type:"[String]"},managers:{__type:"[String]"},owner:{__type:"User"},notes:{__type:"[String]"},equipment:{__type:"[String]"}},People:{__typename:{__type:"String!"},id:{__type:"ID"},name:{__type:"String"}},ProjectInput:{_id:{__type:"ID"},id:{__type:"String"},name:{__type:"String"},files:{__type:"[FileInput]"},status:{__type:"String"},startDate:{__type:"Date"},endDate:{__type:"Date"}},FileInput:{id:{__type:"ID"},name:{__type:"String"},extension:{__type:"String"},mimeType:{__type:"String"}},ScheduleItemInput:{project:{__type:"String"},people:{__type:"[String]"},equipment:{__type:"[String]"},notes:{__type:"[String]"},managers:{__type:"[String]"},owner:{__type:"String"},date:{__type:"Date"}}},scalarsEnumsHash:{ID:!0,String:!0,Date:!0,Float:!0,Boolean:!0},queryFetcher:l}),d=(s.query,s.mutation,s.mutate,s.subscription,s.resolved,s.refetch,Object(r.a)(s,{defaults:{suspense:!1,staleWhileRevalidate:!1}})),u=(d.graphql,d.useQuery),p=(d.usePaginatedQuery,d.useTransactionQuery,d.useLazyQuery,d.useRefetch),h=d.useMutation;d.useMetaState,d.prepareReactRender,d.useHydrateCache,d.prepareQuery},495:function(e,t){},496:function(e,t){},497:function(e,t){},498:function(e,t){},499:function(e,t){},531:function(e,t,n){},532:function(e,t,n){},550:function(e,t,n){},551:function(e,t,n){},552:function(e,t,n){},553:function(e,t,n){},554:function(e,t,n){},555:function(e,t,n){},56:function(e,t,n){"use strict";n.d(t,"e",(function(){return b})),n.d(t,"a",(function(){return B})),n.d(t,"c",(function(){return Se})),n.d(t,"b",(function(){return ze})),n.d(t,"d",(function(){return qe})),n.d(t,"f",(function(){return wt}));var o,i,a,r,c,l=n(30),s=n(0),d=n.n(s),u=n(2),p=n(5),h=n.n(p),f=n(1),b=h()((function(e){var t;return Object(f.jsxs)(u.Box,{background:{color:"brand"},elevation:"small",className:"".concat(e.className," sidebar"),children:[Object(f.jsx)(u.Button,{onClick:e.onLogoClick,icon:e.logo,className:"sidebar-header-image"}),Object(f.jsx)(u.Box,{pad:{vertical:"xsmall"},className:"sidebar-menu",children:null===(t=e.menu)||void 0===t?void 0:t.map((function(t,n){return Object(f.jsxs)("li",{className:"sidebar-menu-opt ".concat(e.active=="/"+t.label.toLowerCase()?"active":""," ").concat(0==n&&""==e.active?"active":""),onClick:function(){return e.onSelect(t.label)},children:[d.a.cloneElement(t.icon,{style:{filter:"invert(1)",fill:"#F3E6DC",minWidth:"30px",maxWidth:"30px"}}),Object(f.jsx)(u.Text,{color:"neutral-1",margin:{left:"small"},children:t.label})]},"sidebar-".concat(n))}))})]})}))(o||(o=Object(l.a)(["\n@media print{\n  .sidebar{\n    display: none !important;\n  }\n}\n\n@media (max-width: 600px){\n  .sidebar-header-image, .sidebar-admin-option, .sidebar-footer{\n    display: none !important;\n  }\n\n  .sidebar{\n    width: 100% !important;\n  }\n\n  .sidebar-menu{\n    display: flex;\n    flex-direction: row;\n    margin-bottom: 0;\n    justify-content: space-between;\n  }\n}\n\n@media (min-width: 601px) and (max-width:1024px){\n  .sidebar{\n    width: 52px !important;\n  }\n}\n\n@media (max-width: 1025px){\n\n  .sidebar > .sidebar-footer > .sidebar-footer__action{\n    flex: 1;\n    justify-content: center;\n  }\n  .sidebar > .sidebar-footer > .sidebar-footer__info{\n    display: none;\n  }\n\n  .sidebar > .sidebar-menu {\n    margin-top: 0px;\n  }\n\n  .sidebar-menu > .sidebar-menu-opt{\n    font-size: 0px;\n  }\n\n  .sidebar > .sidebar-header-image{\n    display: none !important;\n  }\n\n  .sidebar-admin-option p{\n    font-size: 0px;\n  }\n}\n\n.sidebar-admin-option:hover{ \n background: rgb(230, 230, 230, 0.2); \n}\n\n.sidebar-admin-option{\n  cursor: pointer;\n  display: flex;\n  color: white;\n  align-items: center;\n  height: 45px;\n  font-size: 18px;\n  padding-left: 15px;\n}\n\n.sidebar-header-image{\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n\n.sidebar-footer{\n  display: flex;\n  color: white;\n  padding: 8px;\n  border-top: 1px solid #e6e6e6;\n}\n\n.sidebar-footer__info{\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  align-items: flex-start;\n}\n\n.sidebar-footer__action{\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  justify-content: flex-end;\n}\n\n.sidebar-footer__email > p{\n  font-size: 11px;\n  color: #e6e6e6;\n}\n\n&.sidebar{\n  user-select: none;\n  border-radius-top-left: 0px !important;\n  border-radius-bottom-left: 0px !important;\n  display: flex;\n  width: 155px;\n  flex-direction: column;\n}\n\n.sidebar-header-image{\n  height: 60px;\n  margin-top: 16px;\n  filter: invert(1);\n  padding-left: 10px;\n  padding-right: 10px;\n  margin-bottom: 15px;\n}\n\n.sidebar-menu{\n  padding: 0;\n  flex: 1;\n  list-style: none;\n}\n\n.sidebar-menu > li{\n  cursor: pointer;\n  height: 45px;\n  display: flex;\n  align-items: center;\n  font-size: 18px;\n  color: #e6e6e6;\n  padding-left: 15px;\n}\n\n.sidebar-menu > li > span {\n  margin-right: 15px;\n}\n\n.sidebar-menu > li:hover{\n background: rgb(230, 230, 230, 0.2); \n}\n\n.sidebar-menu > li.active{\n  background: rgb(230, 230, 230, 0.2);;\n}\n\n"]))),j=n(57),v=n(7),m=n(4),x=n(572),O=n(573),g=n(37),y=n.n(g),w=n(570),S=n(571),k=n(93),_=n.n(k),C=function(e){var t=Object(s.useState)([]),n=Object(m.a)(t,2),o=n[0],i=n[1];return Object(s.useEffect)((function(){e.documents&&i(e.documents)}),[e.documents]),Object(s.useEffect)((function(){e.documentUrl&&i([{uri:e.documentUrl,fileType:e.documentType}])}),[e.documentUrl,e.documentUrl]),e.documents||e.documentUrl?Object(f.jsx)(_.a,{config:{header:{disableFileName:!0,disableHeader:!0,overrideComponent:function(){return Object(f.jsx)(f.Fragment,{})}}},documents:o,pluginRenderers:k.DocViewerRenderers}):null},T=function(e){var t=e.files,n=void 0===t?[]:t,o=e.token;if(!n||1!=n.length)return Object(f.jsxs)(u.Box,{flex:!0,align:"center",justify:"center",children:[Object(f.jsx)(S.a,{size:"large"}),Object(f.jsxs)(u.Text,{margin:{top:"small"},size:"medium",children:[n.length," files"]})]});var i=n[0],a=i.mimeType?i.mimeType:"text/plain",r="".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/dashboard/flow",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API&&Object({NODE_ENV:"production",PUBLIC_URL:"/dashboard/flow",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API.length>0?Object({NODE_ENV:"production",PUBLIC_URL:"/dashboard/flow",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API:window.location.origin,"/api/files/").concat(i._id).concat((null===i||void 0===i?void 0:i.extension)?null===i||void 0===i?void 0:i.extension:"","?access_token=").concat(o),c=a.split("/")[0],l=a.split("/")[1];switch(c){case"video":return Object(f.jsx)("video",{autoPlay:!1,src:r});case"image":return Object(f.jsx)("img",{style:{width:"100%"},src:r});case"application":switch(l){case"pdf":case"vnd.openxmlformats-officedocument.wordprocessingml.document":case"vnd.openxmlformats-officedocument.spreadsheetml.sheet":return console.log(r,"".concat(c,"/").concat(l)),Object(f.jsx)(C,{documentUrl:r,documentType:"".concat(c,"/").concat(l)});case"zip":case"octet-stream":case"x-zip-compressed":case"x-rar-compressed":return Object(f.jsx)(u.Box,{flex:!0,align:"center",justify:"center",children:Object(f.jsx)(w.a,{size:"large"})});default:return null}default:return null}},D=h()((function(e){var t=e.className,n=e.files,o=void 0===n?[]:n,i=e.token;return Object(f.jsx)(u.Box,{className:t,direction:"column",flex:!0,children:Object(f.jsx)(T,{files:o,token:i})})}))(i||(i=Object(l.a)(["\n    & > * {\n        width: 100%;\n        height: 100%;\n    }\n"]))),I=n(79),E=n.n(I),B=function(e){var t,n=Object(s.useState)(!0),o=Object(m.a)(n,2),i=o[0],a=o[1],r=Object(s.useState)([]),c=Object(m.a)(r,2),l=c[0],d=c[1];Object(s.useEffect)((function(){e.files&&!Object(I.isEqual)(l,e.files)&&d(e.files)}),[e.files]);var p=function(){e.onClose&&e.onClose()},h=function(e,t){var n=l.slice();1==n.length?n[0]=Object(v.a)(Object(v.a)({},n[0]),{},Object(j.a)({},e,t)):n.length>1&&"status"==e&&(n=n.map((function(n){return Object(v.a)(Object(v.a)({},n),{},Object(j.a)({},e,t))}))),d(n)},b=1==l.length?l[0]:{id:" ",name:"Multiple files",mimeType:"Mutliple",owner:{name:"Multiple uploaders"},status:l[0]?l[0].status:"",timestamp:0};return e.open?Object(f.jsx)(u.Layer,{onEsc:p,onClickOutside:p,children:Object(f.jsxs)(u.Box,{height:"80vh",width:"xlarge",pad:"small",children:[Object(f.jsxs)(u.Box,{direction:"row",justify:"between",children:[Object(f.jsx)(u.Heading,{level:"4",margin:{bottom:"small",top:"none"},children:"File Details"}),Object(f.jsx)(u.Button,{icon:Object(f.jsx)(x.a,{}),onClick:function(){return a(!i)},label:"View file"})]}),Object(f.jsxs)(u.Box,{flex:!0,direction:"row",children:[Object(f.jsxs)("div",{style:{flex:1,marginRight:5,display:"flex",flexDirection:"column"},children:[Object(f.jsx)(D,{files:l,token:e.token}),1==(null===l||void 0===l?void 0:l.length)&&i?Object(f.jsx)(u.Button,{icon:Object(f.jsx)(O.a,{}),label:"Download",style:{marginTop:"8px"},onClick:function(){var t=e.files;if(t&&1==t.length)t[0]}}):null]}),Object(f.jsxs)("div",{style:{overflow:"hidden",width:i?"auto":"0px",transition:"flex 250ms ease-in",flex:i?1:0,marginLeft:5,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[Object(f.jsxs)(u.Box,{gap:"small",direction:"column",children:[Object(f.jsx)(u.TextInput,{placeholder:"File title",onChange:function(e){return h("name",e.target.value)},value:null===b||void 0===b?void 0:b.name}),Object(f.jsx)(u.Text,{margin:"none",size:"small",children:"Status"}),Object(f.jsx)(u.Select,{value:(null===b||void 0===b?void 0:b.status)||"",onChange:function(e){var t=e.value;e.option;return h("status",t)},options:["Issued","Workshop","Finished"]})]}),Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(f.jsxs)(u.Text,{style:{color:"gray"},children:["File type: ",b&&b.mimeType]}),Object(f.jsxs)(u.Text,{style:{color:"gray"},children:["Uploaded By: ",b&&b.owner&&(null===(t=b.owner)||void 0===t?void 0:t.name)]}),b.id&&Object(f.jsxs)(u.Text,{style:{color:"gray"},children:["Upload Date: ",b&&y()().format("hh:mma DD/MM/YYYY")]})]})]})]}),Object(f.jsxs)(u.Box,{margin:{top:"small"},direction:"row",justify:"end",children:[Object(f.jsx)(u.Button,{label:"Cancel",onClick:p}),Object(f.jsx)(u.Button,{primary:!0,label:"Save",onClick:function(){var t;l&&(null===(t=e.onSubmit)||void 0===t||t.call(e,l));p()}})]})]})}):null},L=h()((function(e){var t=Object(s.useState)(!0),n=Object(m.a)(t,2),o=n[0],i=(n[1],Object(s.useState)(!0)),a=Object(m.a)(i,2),r=a[0],c=(a[1],e.options),l=e.value,d=e.onChange;return Object(f.jsxs)(u.Box,{direction:"column",className:e.className,children:[Object(f.jsx)(u.Box,{width:"100%",className:"search-field__input",children:Object(f.jsx)(u.Select,{labelKey:"label",valueKey:"value",options:(null===c||void 0===c?void 0:c.filter((function(e){switch(e.type){case"quote":return o;case"job":return r;default:return!0}})).map((function(e){switch(e.type){case"quote":return{label:"".concat(e.QuoteID," - ").concat(e.Name).substring(0,40),value:"quote:"+e.QuoteID};case"job":return{label:"".concat(e.JobID," - ").concat(e.JobName).substring(0,40),value:"job:"+e.JobID};default:return{}}})))||[],value:l,onChange:function(e){var t=e.option;return d(t)}})}),Object(f.jsx)(u.Box,{margin:{top:"small"},direction:"row",className:"search-field__options"})]})}))(a||(a=Object(l.a)(["\n  .search-field__input{\n      position: relative;\n  }\n  .job-option.selected:hover{\n    background:  #3f51b59e !important;\n  }\n  \n  .quote-option.selected:hover{\n    background: #b5b13fad !important;\n  }\n  \n  .job-option.selected,job-option.selected:focus{\n    background: #3f51b5 !important;\n    color: white;\n  }\n  \n  .quote-option.selected,quote-option.selected:focus{\n    background:  #b5b13f !important;\n    color: white;\n  }\n  \n  .job-option {\n    margin-right: 8px;\n  }\n  "]))),M=n(17),z=n(18),N=n(23),P=n(24),R=function(e){Object(N.a)(n,e);var t=Object(P.a)(n);function n(){return Object(M.a)(this,n),t.apply(this,arguments)}return Object(z.a)(n,[{key:"render",value:function(){var e=this.props,t=e.size,n=e.color;return Object(f.jsx)("div",{style:{marginRight:8,background:n,borderRadius:2*t,height:t,width:t}})}}]),n}(s.Component),A=n(574),H=(h()((function(e){var t=Object(s.useState)(""),n=Object(m.a)(t,2),o=n[0],i=n[1],a=Object(s.useState)([]),r=Object(m.a)(a,2),c=r[0],l=(r[1],Object(s.useState)()),d=Object(m.a)(l,2),p=d[0],h=d[1],b=Object(s.useState)("create"),j=Object(m.a)(b,2),v=j[0],x=j[1],O=Object(s.useState)(),g=Object(m.a)(O,2),y=g[0],w=g[1],S=Object(s.useState)(),k=Object(m.a)(S,2),_=k[0],C=k[1];Object(s.useEffect)((function(){}),[]),Object(s.useEffect)((function(){var t,n,o,a,r,c,l,s;e.event?e.event.id?(h((null===(t=e.event)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.type)?e.event.data.type+":":"quote:"+(null===(o=e.event)||void 0===o||null===(a=o.data)||void 0===a?void 0:a.id)),i(e.event.type?e.event.type:"quotes"),w(null===(r=e.event)||void 0===r?void 0:r.start),C(null===(c=e.event)||void 0===c?void 0:c.end),x("edit")):(w(null===(l=e.event)||void 0===l?void 0:l.start),C(null===(s=e.event)||void 0===s?void 0:s.end),x("create")):(h(null),w(void 0),C(void 0),x("create"))}),[e.event]);var T=function(){var t;null===(t=e.onClose)||void 0===t||t.call(e)};return e.open?Object(f.jsx)(u.Layer,{onClickOutside:T,onEsc:T,children:Object(f.jsxs)(u.Box,{className:e.className,pad:"small",children:[Object(f.jsxs)(u.Heading,{margin:{vertical:"xsmall"},level:"3",children:["edit"==v?"Edit":"Make"," Plans"]}),Object(f.jsxs)(u.Box,{width:"medium",style:{overflowY:"visible",display:"flex",flexDirection:"column",paddingBottom:"24px"},children:[Object(f.jsx)(u.Box,{style:{flex:1,display:"flex",flexDirection:"column"},children:Object(f.jsx)(u.Box,{style:{display:"flex",marginBottom:"16px"},children:Object(f.jsx)(L,{options:c,onChange:function(e){console.log(e),h(e)},value:p||{}})})}),Object(f.jsxs)("div",{style:{marginTop:8,display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(f.jsx)(A.a,{style:{marginRight:8}}),Object(f.jsx)(u.Select,{value:o,options:[{color:"#3f51b5",label:"Job Planning"},{color:"#b5b13f",label:"Quote Planning"},{color:"#b53f49",label:"Design Planning"}],onChange:function(e){return i("".concat(e.target.value))},children:function(e){var t=e.datum;return Object(f.jsxs)(u.Box,{children:[Object(f.jsx)(R,{color:t.color,size:12}),Object(f.jsx)(u.Text,{children:t.label})]})}})]})]}),Object(f.jsxs)(u.Box,{direction:"row",justify:"end",children:["edit"==v?Object(f.jsx)(u.Button,{onClick:function(){var t;null===(t=e.event)||void 0===t||t.id},label:"Delete"}):null,Object(f.jsx)(u.Button,{onClick:T,label:"Close"}),Object(f.jsx)(u.Button,{primary:!0,disabled:!(null!=o&&null!=p&&null!=y&&null!=_),onClick:function(){var e=null===y||void 0===y?void 0:y.getTime(),t=null===_||void 0===_?void 0:_.getTime();console.log(c,p);for(var n=0;n<(null===c||void 0===c?void 0:c.length);n++){var i=null===c||void 0===c?void 0:c[n].type;i+":"+(null===c||void 0===c?void 0:c[n]["quote"==i?"QuoteID":"JobID"])==(null===p||void 0===p?void 0:p.value)&&{id:null===c||void 0===c?void 0:c[n]["quote"==i?"QuoteID":"JobID"],name:null===c||void 0===c?void 0:c[n]["quote"==i?"Name":"JobName"],type:i}}var a={quote:p,start:e,end:t,type:o};console.log("Planning",a)},label:"edit"==v?"Save":"Create"})]})]})}):null}))(r||(r=Object(l.a)(["\n\n.MuiSelect-select{\n    display: flex;\n    align-items: center;\n    padding-left: 8px;\n}\n"]))),n(9)),F=n.n(H),U=n(15),q=n(224),W=h()((function(e){var t=e.selected,n=void 0===t?[]:t,o=e.onSelect,i=e.className,a=Object(s.useState)([]),r=Object(m.a)(a,2),c=r[0],l=r[1];Object(s.useEffect)((function(){n&&l(n)}),[n]);return Object(f.jsx)(u.Box,{direction:"column",className:i,children:Object(f.jsx)(q.Calendar,{className:"calendar-contained",multiple:!0,value:n.concat(c),onChange:function(e){if(Array.isArray(e)){var t=e.map((function(e){return e.valueOf()}));n=Array.from(new Set(t)).map((function(e){return new Date(e)})),null===o||void 0===o||o(n),console.log(n)}var n}})})}))(c||(c=Object(l.a)(["\n    .calendar-contained{\n        height: 100%;\n        width: 100%;\n        display: flex;\n    }\n\n    .calendar-contained .rmdp-calendar{\n        flex: 1;\n    }\n\n    .calendar-contained .rmdp-calendar > div:last-child{\n        flex: 1;\n        display: flex;\n    }\n\n    .calendar-contained .rmdp-calendar .rmdp-day-picker{\n        flex: 1;\n        flex-direction: column;\n        display: flex;\n        padding-left: 8px;\n        padding-right: 8px;\n        border: none;\n    }\n\n    .calendar-contained .rmdp-calendar .rmdp-day-picker > div{\n        flex: 1;\n    }\n\n    .calendar-contained .rmdp-top-class {\n        flex: 1;\n    }\n\n    .calendar-contained .rmdp-week-day {\n        font-size: 18px;\n    }\n\n    .calendar-contained .rmdp-day{\n        height: 45px;\n        width: 45px;\n\n        & > span{\n            font-size: 18px;\n\n        }\n    }\n"]))),K=n(579),Y=n(575),Q=n(576),V=function(e){var t=Object(s.useState)([]),n=Object(m.a)(t,2),o=n[0],i=n[1],a=Object(s.useState)([]),r=Object(m.a)(a,2),c=r[0],l=r[1],d=function(e){var t=c.slice();if(t.includes(e)){var n=t.indexOf(e);t.splice(n,1)}else t.push(e);l(t)},p=function(e){var t=o.slice();if(t.includes(e)){var n=t.indexOf(e);t.splice(n,1)}else t.push(e);i(t)},h=function(e,t){return e.slice().filter((function(e){return-1===t.indexOf(e.id)}))};return Object(f.jsxs)(u.Box,{direction:"row",children:[Object(f.jsx)(u.Box,{flex:!0,overflow:"scroll",children:Object(f.jsx)(u.List,{onClickItem:function(e){var t=e.item;return p(t.id)},data:h(e.options,e.selected),primaryKey:"name",children:function(e){return Object(f.jsxs)(u.Box,{direction:"row",align:"center",children:[Object(f.jsx)(u.CheckBox,{checked:o.indexOf(e.id)>-1,onChange:function(t){return p(e.id)}}),Object(f.jsx)(u.Text,{margin:{left:"small"},children:e.name})]})}})}),Object(f.jsxs)(u.Box,{justify:"center",direction:"column",children:[Object(f.jsx)(u.Button,{icon:Object(f.jsx)(Y.a,{}),disabled:o.length<=0,size:"small",onClick:function(){var t;null===(t=e.onAdd)||void 0===t||t.call(e,o),i([])}}),Object(f.jsx)(u.Button,{icon:Object(f.jsx)(Q.a,{}),disabled:c.length<=0,size:"small",onClick:function(){var t;null===(t=e.onRemove)||void 0===t||t.call(e,c),l([])}})]}),Object(f.jsx)(u.Box,{flex:!0,overflow:"scroll",children:Object(f.jsx)(u.List,{primaryKey:"name",onClickItem:function(e){var t=e.item;return d(t.id)},data:e.selected.map((function(t){return Object(v.a)({id:t},e.options.find((function(e){return e.id==t})))})),children:function(e){return Object(f.jsxs)(u.Box,{direction:"row",align:"center",children:[Object(f.jsx)(u.CheckBox,{checked:c.indexOf(e.id)>-1,onChange:function(t){return d(e.id)}}),Object(f.jsx)(u.Text,{margin:{left:"small"},children:e.name})]})}})})]})},J=function(e){Object(N.a)(n,e);var t=Object(P.a)(n);function n(){return Object(M.a)(this,n),t.apply(this,arguments)}return Object(z.a)(n,[{key:"not",value:function(e,t){return e.filter((function(e){return-1===t.indexOf(e)}))}},{key:"onAdd",value:function(e){var t=this.props.selected;this.props.onChange(t.concat(e))}},{key:"onRemove",value:function(e){var t=this.props.selected;this.props.onChange(this.not(t,e))}},{key:"render",value:function(){var e=this.props,t=e.inputData,n=e.selected;return Object(f.jsx)(u.Box,{height:"100%",children:Object(f.jsx)(V,{assignedKey:t.assigned.key,assignedList:t.assigned.data,labelKey:t.labelKey,options:t.data.filter((function(e){return e.name})).sort((function(e,t){return e.name.localeCompare(t.name,"en",{numeric:!0})})),selected:n,onAdd:this.onAdd.bind(this),onRemove:this.onRemove.bind(this)})})}}]),n}(s.Component),X=function(e){Object(N.a)(n,e);var t=Object(P.a)(n);function n(){return Object(M.a)(this,n),t.apply(this,arguments)}return Object(z.a)(n,[{key:"not",value:function(e,t){return e.filter((function(e){return-1===t.indexOf(e)}))}},{key:"onAdd",value:function(e){var t=this.props.selected.slice();this.props.onChange(t.concat(e))}},{key:"onRemove",value:function(e){var t=this.props.selected.slice();this.props.onChange(this.not(t,e))}},{key:"render",value:function(){var e=this.props,t=e.inputData,n=e.selected;return Object(f.jsx)(u.Box,{height:"100%",children:Object(f.jsx)(V,{assignedKey:t.assigned.key,assignedList:t.assigned.data,labelKey:t.labelKey,options:t.data,selected:n,onAdd:this.onAdd.bind(this),onRemove:this.onRemove.bind(this)})})}}]),n}(s.Component),G=n(577),$=n(578),Z=function(e){var t=function(){var t,n,o=(null===(t=e.data)||void 0===t?void 0:t.slice())||[];o.push(""),null===(n=e.onChange)||void 0===n||n.call(e,o)};return Object(f.jsxs)(u.Box,{overflow:"scroll",height:{min:"50vh"},className:"note-tab",children:[Object(f.jsx)(u.List,{pad:{vertical:"xsmall"},data:e.data,children:function(n,o){return Object(f.jsxs)(u.Box,{direction:"row",align:"center",children:[Object(f.jsx)(u.TextInput,{autoFocus:!0,focusIndicator:!1,value:n,placeholder:"Enter note here...",onKeyDown:function(e){"Enter"==e.key&&t()},onChange:function(t){return function(t,n){var o,i,a=(null===(o=e.data)||void 0===o?void 0:o.slice())||[];a[t]=n,null===(i=e.onChange)||void 0===i||i.call(e,a)}(o,t.target.value)}}),Object(f.jsx)(u.Button,{hoverIndicator:!0,icon:Object(f.jsx)(G.a,{}),onClick:function(){return function(t){var n,o,i=(null===(n=e.data)||void 0===n?void 0:n.slice())||[];i.splice(t,1),null===(o=e.onChange)||void 0===o||o.call(e,i)}(o)}})]})}}),Object(f.jsx)(u.Button,{onClick:t,icon:Object(f.jsx)($.a,{}),label:"Add Note"})]})},ee=function(e){var t=e.jobs,n=void 0===t?[]:t,o=e.plants,i=void 0===o?[]:o,a=e.people,r=void 0===a?[]:a,c=e.item,l=e.onChange,d=e.scheduledJobs,p=e.todaysSchedule,h=Object(s.useState)(""),b=Object(m.a)(h,2),j=b[0],x=b[1],O=Object(s.useState)("People"),g=Object(m.a)(O,2),y=(g[0],g[1],[{label:"People",component:Object(f.jsx)(X,{onChange:function(e){return null===l||void 0===l?void 0:l(Object(v.a)(Object(v.a)({},c),{},{people:e}))},inputData:{assigned:{key:"id",data:null===d||void 0===d?void 0:d.map((function(e){return e.people}))},labelKey:"name",data:r},selected:(null===c||void 0===c?void 0:c.people)||[]})},{label:"Equipment",component:Object(f.jsx)(J,{onChange:function(e){return null===l||void 0===l?void 0:l(Object(v.a)(Object(v.a)({},c),{},{equipment:e}))},inputData:{assigned:{key:"id",data:null===p||void 0===p?void 0:p.map((function(e){return e.equipment}))},labelKey:"name",data:i||[]},selected:(null===c||void 0===c?void 0:c.equipment)||[]})},{label:"Notes",component:Object(f.jsx)(Z,{data:(null===c||void 0===c?void 0:c.notes)||[],onChange:function(e){return null===l||void 0===l?void 0:l(Object(v.a)(Object(v.a)({},c),{},{notes:e}))}})}]),w=Object(s.useMemo)((function(){return E.a.map(n,E.a.partialRight(E.a.pick,["id","name"])).map((function(e){return Object(v.a)(Object(v.a)({},e),{},{id:"".concat(e.id)})}))}),[JSON.stringify(n)]);return Object(f.jsxs)(u.Box,{flex:!0,direction:"column",children:[Object(f.jsxs)(u.Box,{align:"center",direction:"row",children:[Object(f.jsx)(u.Box,{flex:!0,children:Object(f.jsx)(u.Select,{onSearch:function(e){return x(e)},placeholder:"Select Job...",labelKey:function(e){return"".concat(e.id," - ").concat(e.name).substring(0,49)},options:w.filter((function(e){return"".concat(e.id," - ").concat(e.name).indexOf(j)>-1})),value:(null===c||void 0===c?void 0:c.project.id)||(null===c||void 0===c?void 0:c.project),valueKey:{key:"id",reduce:!0},onChange:function(e){var t=e.option;console.log(t),null===l||void 0===l||l(Object(v.a)(Object(v.a)({},c),{},{project:t.id}))}})}),c&&(null===c||void 0===c?void 0:c.project)&&Object(f.jsx)(u.Box,{direction:"column",justify:"center",children:Object(f.jsx)(u.Button,{margin:"none",hoverIndicator:!0,a11yTitle:"Go to Job",icon:Object(f.jsx)(K.a,{}),href:"/dashboard/flow/projects/".concat(null===c||void 0===c?void 0:c.project.id)})})]}),Object(f.jsx)(u.Box,{height:{max:"50vh"},children:Object(f.jsx)(u.Tabs,{alignControls:"start",children:y.map((function(e){return Object(f.jsx)(u.Tab,{title:e.label,children:e.component})}))})})]})},te=n(102),ne=function(e){var t=e.users,n=void 0===t?[]:t,o=e.size,i=void 0===o?32:o;return Object(f.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:n.map((function(e,t){var n,o={width:i,height:i,fontSize:i/2,backgroundColor:e.color};return t>0&&(o.transform="translateX(-"+i/2*t+"px)"),Object(f.jsx)(u.Avatar,{style:o,children:Object(f.jsx)(u.Text,{size:"".concat(i*(5/8),"px"),color:Object(te.a)(e.color||""),children:null===(n=e.name)||void 0===n?void 0:n.split(" ").map((function(e){return e[0]})).join("")})})}))})},oe=n(60),ie=function(e){var t=e.managers,n=void 0===t?[]:t,o=e.users,i=void 0===o?[]:o;console.log(n,i);var a=n.map((function(e,t){var n=i.find((function(t){return t.id==e}))||{};return{name:n.name,color:Object(oe.b)(n.id||"")}}));return Object(f.jsx)(ne,{users:a})},ae=function(e,t,n,o){console.log("managers",t,o,n);var i=null===n||void 0===n?void 0:n.filter((function(e){var n=!((o||[]).indexOf(e)>-1);return!((t||[]).indexOf(e)>-1)&&n}));console.log(i);var a=[e].concat((null===t||void 0===t?void 0:t.map((function(e){return"".concat(e)})))||[]);return i&&(a=a.concat(i)),a.filter((function(e){return e&&!((o||[]).indexOf(e)>-1)}))},re=n(37),ce=function(e){var t,n,o,i,a,r=Object(s.useState)("create"),c=Object(m.a)(r,2),l=c[0],d=c[1],p=Object(s.useMemo)((function(){return"clone"===l?"Clone":"edit"===l?"Edit":"Create"}),[l]),h=Object(s.useState)(!1),b=Object(m.a)(h,2),j=(b[0],b[1],Object(s.useState)(0)),x=Object(m.a)(j,2),O=(x[0],x[1],Object(s.useState)(new Date)),g=Object(m.a)(O,2),y=(g[0],g[1],Object(s.useState)(e.timestamp||new Date)),w=Object(m.a)(y,2),S=w[0],k=w[1],_=Object(s.useState)(),C=Object(m.a)(_,2),T=C[0],D=C[1],I=Object(s.useState)({}),E=Object(m.a)(I,2),B=E[0],L=E[1],M=Object(s.useState)([]),z=Object(m.a)(M,2),N=z[0],P=z[1],R=Object(s.useState)([]),A=Object(m.a)(R,2),H=A[0],q=A[1];Object(s.useEffect)((function(){e.timestamp&&k(e.timestamp)}),[e.timestamp]),Object(s.useEffect)((function(){e.item&&D(e.item)}),[e.item]),Object(s.useEffect)((function(){var t;console.log(e.item),e.item&&e.item.id&&d("edit"),e.item&&e.item.id&&(null===T||void 0===T?void 0:T.id)!==(null===(t=e.item)||void 0===t?void 0:t.id)&&console.log("SCHEDULe")}),[null===(t=e.item)||void 0===t?void 0:t.id]);var K=function(){var t=Object(U.a)(F.a.mark((function t(){return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(T,l),T&&("clone"===l?e.onCloneItem(T,N,H):"Create"==p?e.onCreateItem(T,S):e.onSaveItem(T,S),Y());case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Y=function(){var t;null===(t=e.onClose)||void 0===t||t.call(e),D(void 0),P([]),q([]),L({}),d("create")},Q=function(e,t,n,o){var i;if(t){var a=t&&t.managers&&t.managers.indexOf(e.id)>-1,r=n.indexOf(e.id)>-1,c=t&&(null===(i=t.owner)||void 0===i?void 0:i.id)==e.id,l=o.indexOf(null===e||void 0===e?void 0:e.id)<0;return(a||r||c)&&l}}({id:e.user._id},T||null,(null===B||void 0===B?void 0:B.add)||[],(null===B||void 0===B?void 0:B.remove)||[]);return console.log(null===T||void 0===T?void 0:T.owner,e.user._id),e.open?Object(f.jsx)(u.Layer,{style:{zIndex:99,boxShadow:"5px 5px 15px -5px #323a3c",overflow:"hidden"},onClickOutside:Y,onEsc:Y,children:Object(f.jsxs)(u.Box,{round:"xxsmall",overflow:"hidden",background:"neutral-1",direction:"column",width:"large",children:[Object(f.jsxs)(u.Box,{background:"accent-2",justify:"between",align:"center",pad:{top:"small",bottom:"small",horizontal:"small"},direction:"row",children:[Object(f.jsx)(u.Box,{direction:"row",align:"center",children:Object(f.jsxs)(u.Heading,{level:"4",margin:"none",children:[p," Schedule Item for ",re(S).format("DD/MM/YYYY")]})}),Object(f.jsxs)(u.Box,{direction:"row",align:"center",children:["Edit"==p&&(null===T||void 0===T||null===(n=T.owner)||void 0===n?void 0:n.id)!==(null===(o=e.user)||void 0===o?void 0:o._id)&&function(){var e=function(){var e=Object(U.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q&&(null===T||void 0===T?void 0:T.id)||!Q&&(null===T||void 0===T||T.id);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)(u.Button,{hoverIndicator:!0,style:{padding:"4px 8px 4px 8px"},margin:{right:"small"},plain:!0,onClick:e,label:Q?"Leave":"Join"})}(),Object(f.jsx)(ie,{users:e.users,managers:ae((null===T||void 0===T||null===(i=T.owner)||void 0===i?void 0:i.id)||(null===(a=e.user)||void 0===a?void 0:a._id)||"",(null===T||void 0===T?void 0:T.managers)||[],B.add,B.remove)})]})]}),Object(f.jsx)(u.Box,{pad:"small",height:{max:"60vh"},margin:{bottom:"small"},children:"Edit"!==p&&"Create"!==p?Object(f.jsx)(W,{selected:H,onSelect:function(e){return q(e)}}):Object(f.jsx)(ee,{item:T,onChange:function(e){console.log(Object(v.a)(Object(v.a)({},T),e)),D(Object(v.a)(Object(v.a)({},T),e))},jobs:e.projects,plants:e.equipment,people:e.people})}),Object(f.jsxs)(u.Box,{gap:"xsmall",pad:"xsmall",border:{side:"top",color:"light-3"},direction:"row",justify:"end",children:[Q&&function(e){return"Edit"===e?Object(f.jsx)(u.Button,{color:"secondary",onClick:function(){null===T||void 0===T||T.id,Y()},children:"Delete"}):null}(p),Q&&function(e){return"Edit"===e?Object(f.jsx)(u.Button,{label:"Clone",onClick:function(){d("clone")}}):"Clone"===e?Object(f.jsx)(u.Button,{label:"Edit",onClick:function(){d("edit")}}):null}(p),Object(f.jsx)(u.Button,{label:"Close",onClick:Y}),(Q||"Create"===p)&&Object(f.jsx)(u.Button,{primary:!0,onClick:K,label:"Edit"===p||"Clone"===p?"Clone"==p?"Save Cloned Items":"Save Changes":"Create"})]})]})}):null},le=function(e){Object(N.a)(n,e);var t=Object(P.a)(n);function n(){return Object(M.a)(this,n),t.apply(this,arguments)}return Object(z.a)(n,[{key:"change",value:function(e){var t=this.props,n=t.value,o=t.onChange,i=t.stepSize;o(y()(n).add(e,i||"months"))}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.displayFormat;return Object(f.jsxs)(u.Box,{direction:"row",align:"center",className:"month-picker",children:[Object(f.jsx)(u.Button,{icon:Object(f.jsx)(Q.a,{}),onClick:this.change.bind(this,-1)}),Object(f.jsx)(u.Text,{className:"month-picker__display",children:y()(t).format(n)}),Object(f.jsx)(u.Button,{icon:Object(f.jsx)(Y.a,{}),onClick:this.change.bind(this,1)})]})}}]),n}(s.Component),se=n(225),de=n.n(se);var ue,pe,he,fe,be,je=function(e){return Object(f.jsx)("svg",Object(v.a)(Object(v.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 85.48 75.17",width:"1em",height:"1em"},e),{},{children:Object(f.jsx)("path",{d:"M84.87 35.22l-19.23-33a4.53 4.53 0 00-3.9-2.24H23.51a4.52 4.52 0 00-3.91 2.26L.6 35.17a4.51 4.51 0 000 4.48l18.73 33.17a4.52 4.52 0 003.93 2.29h38.65a4.49 4.49 0 003.91-2.26l19.07-33.17a4.53 4.53 0 00-.02-4.46zm-62.1-14.94c0-1.47.51-2.67 2-2.67h3.95a2.38 2.38 0 012 1.09 2.66 2.66 0 002.22 1.2h27.77c1.51 0 2.05 1.29 2.05 2.79v2.37a5.29 5.29 0 00-1.55-.24H24.32a5.29 5.29 0 00-1.55.24zM63.9 53.89a2.74 2.74 0 01-2.74 2.74H50.09v-9.78a2.13 2.13 0 10-2.14 0v9.78h-4.29v-17a2.12 2.12 0 10-3.2-1.82 2.1 2.1 0 001 1.82v17h-4.24v-9.78a2.13 2.13 0 10-3.2-1.83 2.14 2.14 0 001 1.83v9.78h-10.7a2.73 2.73 0 01-2.73-2.74v-24a2.73 2.73 0 012.73-2.73h36.84a2.74 2.74 0 012.74 2.73z"})}))},ve=d.a.createContext({}),me=function(e){var t=e.data,n=e.users,o=Object(s.useContext)(ve),i=o.people,a=o.equipment,r=o.projects;return Object(f.jsxs)("div",{style:{display:"flex",flex:1,flexDirection:"column"},children:[function(){var e=((null===t||void 0===t?void 0:t.people)||[]).map((function(e){return null===i||void 0===i?void 0:i.find((function(t){return t.id==e}))}));return(null===e||void 0===e?void 0:e.length)>0?Object(f.jsx)(u.Box,{direction:"column",className:"staff-container",children:e.map((function(e){return e&&Object(f.jsx)(u.Text,{size:"small",children:e.name})}))}):null}(),function(){var e=((null===t||void 0===t?void 0:t.equipment)||[]).map((function(e){return null===a||void 0===a?void 0:a.find((function(t){return t.id==e}))}));return e.length>0?Object(f.jsxs)(u.Box,{direction:"column",className:"plant-container",children:[Object(f.jsx)(u.Text,{weight:"bold",size:"small",className:"plant-container-header",children:"Plant required"}),e.map((function(e){return Object(f.jsx)(u.Text,{size:"small",children:e.name})}))]}):null}(),Object(f.jsx)(u.Box,{direction:"row",align:"center",justify:"between",children:function(){var e,o,i=[Object(f.jsx)(ne,{size:24,users:[null===t||void 0===t||null===(e=t.owner)||void 0===e?void 0:e.id].concat((null===t||void 0===t||null===(o=t.managers)||void 0===o?void 0:o.map((function(e){return e||""})))||[]).map((function(e){if(n&&n.length>0){var t=n.find((function(t){return t.id==e}));return{color:Object(oe.b)(t?t.id:e),name:t?t.name:""}}return{color:"",name:""}}))})],a=(null===t||void 0===t?void 0:t.project)?null===r||void 0===r?void 0:r.find((function(e){return(null===e||void 0===e?void 0:e.id)==(null===t||void 0===t?void 0:t.project.id)})):{files:[]};return(null===a||void 0===a?void 0:a.files)&&(null===a||void 0===a?void 0:a.files.length)>0&&i.push(Object(f.jsx)(je,{height:25,width:25})),i}()})]})},xe=function(e){var t,n=e.data;return((null===n||void 0===n?void 0:n.notes)||[]).length>0?Object(f.jsx)(u.Box,{background:"#F2726B",children:Object(f.jsxs)(u.Text,{color:"white",className:"notes-indicator",children:["Notes: ",null===n||void 0===n||null===(t=n.notes)||void 0===t?void 0:t.length]})}):null},Oe=function(e){var t,n=e.data,o=(e.moveUp,e.moveDown,Object(oe.b)((null===n||void 0===n||null===(t=n.owner)||void 0===t?void 0:t.name)||"")),i=Object(oe.a)(o);return Object(f.jsx)(u.Box,{justify:"center",direction:"row",background:o,style:{height:"24px",display:"flex",alignItems:"center",paddingLeft:"8px"},children:Object(f.jsx)(u.Text,{size:"small",style:{color:i},children:n.project.id})})},ge=function(e){var t=e.data,n=e.onMove,o=e.users,i=e.onClick,a=Object(s.useState)(),r=Object(m.a)(a,2),c=r[0],l=r[1];return Object(f.jsx)(u.Box,{elevation:"small",overflow:"hidden",round:"xsmall",background:"accent-1",children:Object(f.jsx)(de.a,{enterExitTransitionDurationMs:300,isOpen:((null===t||void 0===t?void 0:t.notes)||[]).length>0&&null!=c,target:c,preferPlace:"right",body:Object(f.jsx)("div",{children:Object(f.jsx)("ul",{style:{listStyle:"none",paddingLeft:0},children:t.notes.map((function(e){return Object(f.jsx)("li",{children:e})}))})}),children:Object(f.jsxs)(u.Box,{"aria-owns":null!=c?"mouse-over-notes":void 0,"aria-haspopup":"true",onMouseEnter:function(e){l(e.currentTarget)},onMouseLeave:function(e){l(null)},className:"schedule-card",children:[Object(f.jsx)(Oe,{moveUp:function(){n&&n(-1)},moveDown:function(){n&&n(1)},data:t}),Object(f.jsxs)(u.Box,{pad:"xsmall",style:{paddingBottom:(null===t||void 0===t?void 0:t.people)&&(null===t||void 0===t?void 0:t.people.length)>0||(null===t||void 0===t?void 0:t.equipment)&&(null===t||void 0===t?void 0:t.equipment.length)>0?void 0:"16px",position:"relative"},onClick:i,children:[Object(f.jsx)(u.Text,{size:"small",weight:"bold",className:"card-title",children:null===t||void 0===t?void 0:t.project.name}),Object(f.jsx)(me,{users:o||[],data:t})]}),Object(f.jsx)(xe,{data:t})]})})})},ye=function(e){return Object(f.jsxs)(u.Box,{flex:!0,round:"xsmall",background:"neutral-1",direction:"column",children:[Object(f.jsx)(u.Box,{children:e.header}),Object(f.jsx)(u.Box,{flex:!0,children:e.children})]})},we=n(37),Se=function(e){var t=Object(s.useState)(!1),n=Object(m.a)(t,2),o=n[0],i=n[1],a=Object(s.useState)(we(e.date).startOf("isoWeek")),r=Object(m.a)(a,2),c=r[0],l=r[1],d=Object(s.useState)([we().startOf("isoWeek"),we().endOf("isoWeek")]),p=Object(m.a)(d,2),h=p[0],b=p[1],j=Object(s.useState)([]),v=Object(m.a)(j,2),x=v[0],O=(v[1],Object(s.useState)()),g=Object(m.a)(O,2),y=g[0],w=g[1],S=Object(s.useState)(),k=Object(m.a)(S,2),_=(k[0],k[1]),C=Object(s.useState)(new Date),T=Object(m.a)(C,2),D=T[0],I=T[1];console.log(e.events),Object(s.useEffect)((function(){e.date&&l(we(e.date).startOf("isoWeek"))}),[e.date]);var E=function(t){var n=[we(t).startOf("isoWeek"),we(t).clone().endOf("isoWeek")];l(we(t).startOf("isoWeek")),b(n),e.onHorizonChanged(new Date(n[0].valueOf()),new Date(n[1].valueOf()))},B=function(e,t){return we(h[0]).add(e,"day").format(t)},L=function(t){var n,o=we(c).clone().add(t,"days");return console.log("RENDER SCHEDULE",o.format("DD/MM/yyyy")),null===(n=e.events)||void 0===n?void 0:n.filter((function(e){return we(e.date).isSame(o,"day")})).map((function(t,n){return Object(f.jsx)("li",{style:{padding:0,marginBottom:4},children:Object(f.jsx)(ge,{jobs:e.projects,users:e.users,onClick:function(){e.user.readonly,M(!0,t)},onMove:function(e){},data:t},n)})}))},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(console.log(e,t),e){t&&t.date&&I(t.date),i(!0),w(t)}else i(!1)};console.log("USER",e.user);var z=function(e){return Object(f.jsx)(u.Button,{style:{background:"#A3B696"},color:"accent-2",label:"Create",className:"add-item-button",onClick:function(){var t=we(h[0]).add(e,"day");I(t),_(e),M(!0)}},e)},N=function(){for(var e=[],t=0;t<7;t++){var n=new Date,o=n.getDate(),i=n.getMonth()+1;e.push(Object(f.jsxs)(u.Box,{direction:"column",flex:!0,className:o==B(t,"DD")&&i==B(t,"MM")?" week-day-header week-day-header-current":"week-day-header",children:[Object(f.jsx)(u.Box,{children:B(t,"ddd")}),Object(f.jsx)(u.Box,{children:B(t,"DD/MM")})]}))}return e},P=function(){for(var e=[],t=0;t<7;t++){var n=L(t),o=new Date,i=o.getDate(),a=o.getMonth()+1;e.push(Object(f.jsx)(u.Box,{pad:{horizontal:"xsmall"},flex:!0,className:i==B(t,"DD")&&a==B(t,"MM")?" week-day week-day-current":"week-day",children:Object(f.jsxs)("ul",{style:{flex:1,listStyle:"none",padding:0},className:"week-day-content",children:[n,z(t)]})}))}return e}(),R=function(){var t=x;return Object(f.jsx)(ce,{onCreateItem:e.onCreateItem,onSaveItem:e.onSaveItem,onCloneItem:e.onCloneItem,projects:e.projects,people:e.people,equipment:e.equipment,user:e.user,users:e.users,onClose:function(){return M(!1)},open:o,timestamp:D,scheduledJobs:t,item:y})}();return Object(f.jsx)(ve.Provider,{value:{projects:e.projects,people:e.people,equipment:e.equipment},children:Object(f.jsx)(ye,{header:function(){var e=N();return Object(f.jsxs)(u.Box,{overflow:"hidden",direction:"column",className:"week-header",children:[Object(f.jsx)(u.Box,{round:{corner:"top",size:"xsmall"},background:"accent-1",align:"center",className:"week-header__controls",children:Object(f.jsx)(le,{value:c,displayFormat:"MMMM YYYY",stepSize:"week",onChange:E})}),Object(f.jsx)(u.Box,{pad:{vertical:"xsmall"},background:"accent-2",direction:"row",className:"week-header__days",children:e})]})}(),children:e.isLoading?Object(f.jsxs)(u.Box,{flex:!0,justify:"center",align:"center",children:[Object(f.jsx)(u.Spinner,{size:"medium"}),Object(f.jsx)(u.Text,{children:"Loading schedule ..."})]}):Object(f.jsxs)(u.Box,{overflow:"scroll",flex:!0,direction:"row",className:"week-days",children:[P,R]})})})},ke=n(580),_e=function(e){return e.file?Object(f.jsx)("div",{className:"file-contents",children:Object(f.jsx)(T,{files:[e.file],token:e.token})}):null},Ce=function(e){var t;return Object(f.jsx)(u.Box,{direction:"row",wrap:!0,className:"robust-file-list",children:null===(t=e.files)||void 0===t?void 0:t.map((function(t,n){return Object(f.jsxs)(u.Box,{className:"file-tile",onClick:function(){return t.cid?e.onClick(t):function(){}},children:[t.cid?Object(f.jsx)("div",{className:"file__delete-actions",onClick:function(n){e.onDeleteClick(t),n.stopPropagation()},children:Object(f.jsx)(ke.a,{})}):null,t.cid?null:Object(f.jsx)("div",{className:"file__upload-indicator",children:Object(f.jsx)(u.Spinner,{})}),Object(f.jsx)(_e,{file:t}),t.cid?Object(f.jsx)(u.Text,{children:t.name}):null]},n)}))})},Te=n(38),De=function(e){var t,n,o,i=Object(s.useState)([]),a=Object(m.a)(i,2),r=a[0],c=a[1],l=Object(s.useState)(),d=Object(m.a)(l,2),p=d[0],h=d[1],b=function(t){var n;c(t),null===(n=e.onSelect)||void 0===n||n.call(e,t.map((function(t){var n;return null===(n=e.files)||void 0===n?void 0:n.find((function(e){return e.id==t}))})))};return Object(f.jsx)(u.DataTable,{step:50,paginate:!0,onMore:function(){return console.log("More")},pin:!0,primaryKey:"id",columns:[{property:"checkbox",render:function(t){return(e.loading||[]).indexOf(t.id)>-1||!t.cid?Object(f.jsx)(u.Spinner,{}):Object(f.jsx)(u.CheckBox,{checked:r.indexOf(t.id)>-1,onChange:function(e){var n,o;n=e,o=t.id,n.target.checked?b([].concat(Object(Te.a)(r),[o])):b(r.filter((function(e){return e!==o}))),e.preventDefault(),e.stopPropagation()}})},header:Object(f.jsx)(u.CheckBox,{onChange:function(t){b(t.target.checked?(e.files||[]).map((function(e){return e.id})):[])},checked:r.length==(null===(t=e.files)||void 0===t?void 0:t.length),indeterminate:r.length>0&&r.length<((null===(n=e.files)||void 0===n?void 0:n.length)||0)}),sortable:!1},{property:"name",header:Object(f.jsx)(u.Text,{children:"Name"}),sortable:!0},{property:"status",header:"Status",sortable:!0}],onSort:function(e){var t=e.property,n=e.direction;return h({property:t,direction:n})},data:null===(o=e.files)||void 0===o?void 0:o.sort((function(e,t){if(!p)return 0;var n=e[p.property]||"",o=t[p.property]||"";return"asc"==p.direction?n==o?0:n>o?1:-1:n==o?0:n<o?1:-1})),onClickRow:function(t){var n=t.target,o=t.datum,i=n;"INPUT"==i.tagName&&"checkbox"==i.type||i.getElementsByTagName("input").length>0||(console.log(i.tagName),e.onClick(o))}})},Ie=function(e){var t=Object(s.useState)(),n=Object(m.a)(t,2),o=n[0],i=(n[1],Object(s.useState)([])),a=Object(m.a)(i,2);a[0],a[1],Object(s.useMemo)((function(){return o?(e.files||[]).map((function(e){return Object(v.a)({},e)})).sort((function(e,t){var n=e[o.property]||"",i=t[o.property]||"";return"asc"==o.direction?n==i?0:n>i?1:-1:n==i?0:n<i?1:-1})):e.files||[]}),[JSON.stringify(e.files),o]);return e.grid?Object(f.jsx)(Ce,{onClick:e.onClick,onDeleteClick:e.onDeleteClick,files:e.files}):Object(f.jsx)(De,{onClick:e.onClick,onSelect:e.onSelect,files:e.files})},Ee=(n(581),n(144)),Be=(n(527),Object(Ee.b)(y.a),n(80)),Le=function(e){return Object(f.jsx)(Be.c,{droppableId:e.droppableId||"",type:"LIST",children:function(t){var n;return Object(f.jsxs)(u.Box,Object(v.a)(Object(v.a)({},t.droppableProps),{},{ref:t.innerRef,gap:"small",style:{minHeight:"min-content"},pad:{vertical:"small"},direction:"column",flex:!0,children:[null===(n=e.items)||void 0===n?void 0:n.map((function(t,n){return Object(f.jsx)(Be.b,{draggableId:t.id,index:n,children:function(n,o){var i;return Object(f.jsx)(u.Box,Object(v.a)(Object(v.a)(Object(v.a)({round:"xsmall",border:{side:"all",color:"lightblue",size:o.isDragging?"2px":"0px"},ref:n.innerRef},n.draggableProps),n.dragHandleProps),{},{children:(null===e||void 0===e||null===(i=e.renderCard)||void 0===i?void 0:i.call(e,t))||"div"}))}},t.id)})),t.placeholder]}))}})},Me=function(e){var t=e.title,n=void 0===t?"":t,o=e.index,i=void 0===o?0:o,a=e.items,r=void 0===a?[{status:"Issued",name:""}]:a,c=(e.isCombineEnabled,e.useClone,e.isScrollable,e.renderCard);return Object(f.jsxs)(u.Box,{background:"accent-1",round:"xsmall",direction:"column",width:"300px",pad:{horizontal:"small"},children:[Object(f.jsxs)(u.Box,{align:"center",justify:"between",border:{side:"bottom",color:"dark-2"},direction:"row",children:[Object(f.jsx)(u.Heading,{margin:"small",level:"4",children:n}),Object(f.jsx)(u.Box,{style:{userSelect:"none"},align:"center",justify:"center",width:"30px",height:"30px",pad:"xsmall",background:"dark-3",round:"large",children:Object(f.jsx)(u.Text,{size:"small",children:null===r||void 0===r?void 0:r.length})})]}),Object(f.jsx)(u.Box,{overflow:{vertical:"auto"},flex:!0,children:Object(f.jsx)(Le,{droppableId:"".concat(i),renderCard:c,items:r})})]})},ze=function(e){var t=e.containerHeight,n=e.useClone,o=e.isCombineEnabled,i=e.withScrollableColumns,a=e.renderCard,r=e.onDrag,c=e.columns,l=void 0===c?[]:c,s=Object(f.jsx)(Be.c,{droppableId:"board",type:"COLUMN",direction:"horizontal",ignoreContainerClipping:Boolean(t),children:function(e){return Object(f.jsxs)(u.Box,Object(v.a)(Object(v.a)({gap:"small",pad:"small",direction:"row",flex:!0,ref:e.innerRef},e.droppableProps),{},{children:[l.map((function(e,t){return Object(f.jsx)(Me,{index:t,title:e.title,items:e.rows,isScrollable:i,isCombineEnabled:o,useClone:n,renderCard:a},e.id)})),e.placeholder]}))}});return Object(f.jsx)(Be.a,{onDragEnd:r||function(e){var t;console.log(e);var n=parseInt(e.source.droppableId),o=null===(t=e.destination)||void 0===t?void 0:t.droppableId;if(o){var i,a=null===(i=l[n].rows)||void 0===i?void 0:i.map((function(e){return e.id})).indexOf(e.draggableId);if(a&&a>-1){var r,c,s=null===(r=l[n].rows)||void 0===r?void 0:r.splice(a,1);null===(c=l[parseInt(o)].rows)||void 0===c||c.push(s)}}},children:Object(f.jsx)(u.Box,{flex:!0,children:s})})},Ne=n(237),Pe=n(586),Re=n(582),Ae=n(583),He=n(584),Fe=n(585),Ue=n(108),qe=function(e){var t=e.files,n=void 0===t?[]:t,o=(e.onChange,e.onUpload),i=(e.jobId,e.style),a=e.onClick,r=e.onDelete,c=e.onEdit,l=(e.onView,e.prefs,e.updatePrefs,e.loading),d=e.uploading,p=Object(s.useState)(null),h=Object(m.a)(p,2),b=(h[0],h[1],Object(s.useState)([])),j=Object(m.a)(b,2),x=j[0],O=j[1],g=Object(s.useState)(!1),y=Object(m.a)(g,2),w=(y[0],y[1],Object(s.useState)(!1)),S=Object(m.a)(w,2),k=S[0],_=S[1],C=function(e){e.map((function(e){return{_id:Object(Ue.a)(),file:e,name:e.name,uploaded:!1}}));null===o||void 0===o||o(e)},T=function(e){};return Object(f.jsx)(u.Box,{flex:!0,round:"xsmall",overflow:"hidden",direction:"column",style:Object(v.a)({},i),children:Object(f.jsxs)(u.Box,{flex:!0,style:{position:"relative"},children:[Object(f.jsxs)(u.Box,{background:"accent-1",direction:"row",justify:"between",children:[Object(f.jsxs)(u.Box,{round:{corner:"top",size:"xsmall"},direction:"row",children:[Object(f.jsx)(u.Button,{onClick:function(){null===c||void 0===c||c(x)},size:"small",disabled:0==x.length,icon:Object(f.jsx)(Re.a,{})}),Object(f.jsx)(u.Button,{onClick:function(){null===r||void 0===r||r(x)},size:"small",disabled:0==x.length,icon:Object(f.jsx)(Ae.a,{color:"status-critical"})})]}),Object(f.jsxs)(u.Box,{overflow:"hidden",round:{corner:"top",size:"xsmall"},direction:"row",elevation:"3",gap:"small",children:[Object(f.jsx)(u.Button,{active:!k,icon:Object(f.jsx)(He.a,{}),onClick:function(){return _(!1)}}),Object(f.jsx)(u.Button,{active:k,icon:Object(f.jsx)(Fe.a,{}),onClick:function(){return _(!0)}})]})]}),Object(f.jsx)(Ne.a,{noClick:!0,noKeyboard:!0,onDrop:C,children:function(e){var t=e.getRootProps,o=e.getInputProps,i=e.isDragActive;e.open;return Object(f.jsxs)("section",{style:{flex:1,display:"flex",flexDirection:"column",outline:"none",overflowY:"scroll"},children:[Object(f.jsxs)(u.Box,Object(v.a)(Object(v.a)({flex:!0,className:"file-list ".concat((null===n||void 0===n?void 0:n.length)>0?"":"empty")},t()),{},{children:[Object(f.jsx)("input",Object(v.a)({id:"file-list__input"},o())),(null===n||void 0===n?void 0:n.length)>0?Object(f.jsx)(Ie,{grid:k,cols:4,loading:l,uploading:d,onSelect:function(e){return O(e)},onClick:a,onDeleteClick:T,files:n||[]}):Object(f.jsxs)(u.Box,{flex:!0,align:"center",justify:"center",direction:"column",className:"upload-helper",children:[Object(f.jsx)(Pe.a,{}),Object(f.jsxs)(u.Text,{color:i?"blue":"",children:[i?"Drop":"Drag"," files here to upload"]})]})]})),Object(f.jsx)(u.Button,{style:{position:"absolute",right:10,bottom:10},color:"primary",onClick:function(){var e=document.createElement("input");e.type="file",e.multiple=!0,e.onchange=function(e){for(var t=[],n=e.target.files,o=0;o<n.length;o++)t.push(n[o]);C(t)},e.click()},children:Object(f.jsx)($.a,{style:{stroke:"white"}})})]})}})]})})},We={header:{top:{style:{backgroundColor:"#333333",fontSize:10,color:"white",textAlign:"center"}},middle:{style:{backgroundColor:"chocolate"},selectedStyle:{backgroundColor:"#b13525",fontWeight:"bold"}},bottom:{style:{background:"#f3f4f5",color:"#667280",fontSize:".9em"},selectedStyle:{backgroundColor:"#b13525",fontWeight:"bold"}}},taskList:{title:{label:"Projects",style:{backgroundColor:"#333333",borderBottom:"solid 1px silver",color:"white",textAlign:"center"}},task:{style:{backgroundColor:"#fbf9f9"}},verticalSeparator:{style:{backgroundColor:"#333333"},grip:{style:{backgroundColor:"#cfcfcd"}}}},dataViewPort:{rows:{style:{}},task:{showLabel:!1,style:{position:"absolute",borderRadius:14,color:"white",textAlign:"center",backgroundColor:"grey"},selectedStyle:{position:"absolute",borderRadius:14,border:"solid 1px #ff00fa",color:"white",textAlign:"center",backgroundColor:"grey"}}},links:{color:"black",selectedColor:"#ff00fa"}},Ke=new(function(){function e(){var t=this;Object(M.a)(this,e),this.data=void 0,this.load=function(e){t.data={},e?t.populate(e,We,t.data):t.data=We},this.data=We}return Object(z.a)(e,[{key:"populate",value:function(e,t,n){if(this.isObject(t))for(var o in t)e[o]?(n[o]=e[o],this.populate(e[o],t[o],n[o])):n[o]=t[o]}},{key:"isObject",value:function(e){return"string"!==typeof e&&"boolean"!==typeof e&&"number"!==typeof e}},{key:"values",get:function(){return this.data}}]),e}()),Ye=n(587),Qe=n(588),Ve=h()((function(e){var t=Object(s.useRef)(null),n=Object(s.useRef)(!1),o=Object(s.useState)(!1),i=Object(m.a)(o,2),a=i[0],r=i[1],c=function(e){n.current=e,r(e)},l=Object(s.useRef)(0),d=function(t){if(n.current){var o;t.stopPropagation();var i=(l.current||0)-t.clientX;l.current=t.clientX,i>0&&console.log("delta",i),null===(o=e.onTaskListSizing)||void 0===o||o.call(e,t.clientX+6)}};return Object(f.jsxs)("div",{ref:t,className:"".concat(e.className," ").concat(e.enabled?"enabled":""," ").concat(1==a?"dragging":""),style:Ke.values.taskList.verticalSeparator.style,onMouseDown:function(t){if(0===t.button&&e.enabled){l.current=t.clientX,c(!0);window.addEventListener("mousemove",d),window.addEventListener("mouseup",(function e(){c(!1),window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",e)}))}},children:[Object(f.jsx)(Ye.a,{}),Object(f.jsx)(Qe.a,{})]})}))(ue||(ue=Object(l.a)(["\n  width: 5px;\n  transition: width 100ms ease-out;\n  cursor: ",";\n\n  align-items: center;\n  justify-content: center;\n  display: flex;\n  flex-direction: column;\n\n  & svg{\n    transition opacity 100ms ease-out;\n  }\n\n  &:not(:hover) svg{\n    opacity: 0;\n  }\n\n  &:hover svg{\n    opacity: 1;\n  }\n\n  &.enabled:hover{\n    width: 13px;\n  }\n  &.dragging{\n    width: 13px;\n  }\n"])),(function(e){return e.enabled?"col-resize":"auto"})),Je=5e3,Xe="week",Ge="month",$e="year",Ze="LINK_POS_RIGHT",et="LINK_POS_LEFT",tt=36e5,nt=new(function(){function e(){var t=this;Object(M.a)(this,e),this.dayToPosition=function(e,t,n){return e*n+t},this.daysInYear=function(e){return t.isLeapYear(e)?366:365}}return Object(z.a)(e,[{key:"dateToPixel",value:function(e,t,n){var o=this.getToday(),i=new Date(e),a=60*(i.getTimezoneOffset()-o.getTimezoneOffset())*1e3;return(i.getTime()-o.getTime()-a)/tt*(n/24)+t}},{key:"pixelToDate",value:function(e,t,n){var o=24/n,i=e-t,a=this.getToday(),r=a.getTime()+i*o*tt,c=new Date(r),l=60*(c.getTimezoneOffset()-a.getTimezoneOffset())*1e3;return c.setTime(c.getTime()+l),c}},{key:"getToday",value:function(){var e=new Date;return e.setHours(0,0,0,0),e}},{key:"monthDiff",value:function(e,t){return Math.abs(t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()))}},{key:"daysInMonth",value:function(e,t){return new Date(t,e,0).getDate()}},{key:"isLeapYear",value:function(e){return e%400===0||e%100!==0&&e%4===0}}]),e}()),ot=h()((function(e){return Object(f.jsx)("div",{className:e.className,style:{display:"flex",justifyContent:"center",alignItems:"center",borderLeft:"solid 1px rgb(216, 217, 218)",position:"absolute",height:20,left:e.left,width:e.width,cursor:"pointer"},children:Object(f.jsx)("div",{children:e.label})})}))(pe||(pe=Object(l.a)(["\n  \n    &:hover{\n        background: rgba(127, 127, 127, 0.3);\n    }\n  "]))),it=d.a.createContext({}),at=function(e){return Object(f.jsx)(u.Box,{background:e.background,style:{position:"absolute",left:e.left,height:"100%",width:"".concat(e.width,"px")}})},rt=h()((function(e){var t=Object(s.useRef)(null),n=Object(s.useContext)(it),o=n.mode,i=n.dayWidth,a=function(e,t){switch(e){case"year":return"YYYY";case"month":return"top"==t?"MMMM YYYY":"MMMM";case"week":return"top"==t?"ww MMMM YYYY":"ww";case"dayweek":return"dd";case"daymonth":return"D"}},r=function(e,t){switch(t){case"year":return nt.daysInYear(e.year());case"month":return e.daysInMonth();case"week":return 7;default:return 1}},c=function(e,t){var n=null;switch(t){case"year":return n=e.year(),y()([n,0,1]);case"month":n=e.year();var o=e.month();return y()([n,o,1]);case"week":return e.clone().startOf("week");default:return e}},l=function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=r(t,n)*(i||0);if(!o){var l=c(t,n);l=l.startOf("day");var s=y()().startOf("day"),d=l.diff(s,"days");o=nt.dayToPosition(d,e.nowposition||0,i||0)}return{left:o,width:a}},d=function(t,n,o){for(var i={top:[],middle:[],bottom:[],background:[]},r={},c="",s="",d="",p=null,h=null,b=e.currentday,j=(e.currentday||0)+(e.numVisibleDays||0),m=function(e){if(p=y()().add(e,"days"),c!=p.format(a(t,"top"))&&(c=p.format(a(t,"top")),h=l(p,t,r.top),r.top=h.left+h.width,i.top.push(Object(f.jsx)(ot,{left:h.left,width:h.width,label:c},e))),s!=p.format(a(n))&&(s=p.format(a(n)),h=l(p,n,r.middle),r.middle=h.left+h.width,i.middle.push(Object(f.jsx)(ot,{left:h.left,width:h.width,label:s},e))),d!=p.format(a(o)))if(d=p.format(a(o)),h=l(p,o,r.bottom),r.bottom=h.left+h.width,"shorttime"==o||"fulltime"==o){var u=Array.apply(null,Array(24)).map((function(){})).map((function(t,n){return Object(f.jsx)(at,{background:n%2==0?"light-1":"neutral-1",left:h.left+h.width/24*n,width:h.width/24},"tile-".concat(e,"-").concat(n))}));i.background.push(u),i.bottom.push(function(e,t,n,o){for(var i=[],a=t/24,r=0,c=0;c<24;c++)i.push(Object(f.jsx)(ot,{left:r,width:a,label:"shorttime"==n?c:"".concat(c,":00")},c)),r+=a;return Object(f.jsxs)("div",{style:{position:"absolute",height:20,left:e,width:t},children:[" ",i]},o)}(h.left,h.width,o,e))}else i.background.push(Object(f.jsx)(at,{left:h.left,width:h.width,background:e%2==0?"light-1":"neutral-1"},"tile-".concat(e))),i.bottom.push(Object(f.jsx)(ot,{left:h.left,width:h.width,label:d},e))},x=(b||0)-30;x<j+30;x++)m(x);return Object(f.jsxs)("div",{className:"timeLine-main-header-container",style:{width:Je,maxWidth:Je},children:[Object(f.jsx)(u.Box,{background:"neutral-4",className:"header-top",children:i.top}),Object(f.jsx)(u.Box,{background:"accent-2",className:"header-middle",children:i.middle}),Object(f.jsx)(u.Box,{background:"accent-1",className:"header-bottom",children:i.bottom}),Object(f.jsx)(u.Box,{className:"header-bottom",style:Object(v.a)({height:"100%"},Ke.values.header.bottom.style),children:i.background})]})};return t.current&&(t.current.scrollLeft=e.scrollLeft||0),Object(f.jsx)("div",{id:"timeline-header",ref:t,className:"".concat(e.className," timeLine-main-header-viewPort"),children:function(){switch(o||e.mode){case"day":return d("week","dayweek","fulltime");case Xe:return d("month","week","dayweek");case Ge:return d("month","dayweek","daymonth");case $e:return d("year","month","week")}}()})}))(he||(he=Object(l.a)(["\n.header-top {\n  height: 20px;\n\n  border-bottom: solid 0.5px silver;\n}\n\n.header-middle {\n  height: 20px;\n  color: white;\n  font-size: 10px;\n  border-bottom: solid 0.5px silver;\n}\n.header-bottom {\n  height: 20px;\n  font-size: 10px;\n  border-bottom: solid 0.5px silver;\n}\n"]))),ct=n(77),lt=function(e){Object(N.a)(n,e);var t=Object(P.a)(n);function n(e){var o;return Object(M.a)(this,n),(o=t.call(this,e)).draggingPosition=void 0,o.onCreateLinkMouseDown=function(e,t){var n,i;0===e.button&&(e.stopPropagation(),null===(n=(i=o.props).onStartCreateLink)||void 0===n||n.call(i,o.props.item,t))},o.onCreateLinkMouseUp=function(e,t){e.stopPropagation(),o.props.onFinishCreateLink(o.props.item,t)},o.onCreateLinkTouchStart=function(e,t){var n,i;e.stopPropagation(),null===(n=(i=o.props).onStartCreateLink)||void 0===n||n.call(i,o.props.item,t)},o.onCreateLinkTouchEnd=function(e,t){e.stopPropagation(),o.props.onFinishCreateLink(o.props.item,t)},o.doMouseDown=function(e,t){o.props.onUpdateTask&&0===e.button&&(e.stopPropagation(),o.dragStart(e.clientX,t))},o.doMouseMove=function(e){o.state.dragging&&(e.stopPropagation(),o.dragProcess(e.clientX))},o.doMouseUp=function(){o.dragEnd()},o.doTouchStart=function(e,t){o.props.onUpdateTask&&(console.log("start"),e.stopPropagation(),o.dragStart(e.touches[0].clientX,t))},o.doTouchMove=function(e){o.state.dragging&&(console.log("move"),e.stopPropagation(),o.dragProcess(e.changedTouches[0].clientX))},o.doTouchEnd=function(e){console.log("end"),o.dragEnd()},o.calculateStyle=o.calculateStyle.bind(Object(ct.a)(o)),o.state={dragging:!1,left:o.props.left||0,width:o.props.width||0,mode:0},o}return Object(z.a)(n,[{key:"componentDidUpdate",value:function(e,t){this.state.dragging&&!t.dragging?(document.addEventListener("mousemove",this.doMouseMove),document.addEventListener("mouseup",this.doMouseUp),document.addEventListener("touchmove",this.doTouchMove),document.addEventListener("touchend",this.doTouchEnd)):!this.state.dragging&&t.dragging&&(document.removeEventListener("mousemove",this.doMouseMove),document.removeEventListener("mouseup",this.doMouseUp),document.removeEventListener("touchmove",this.doTouchMove),document.removeEventListener("touchend",this.doTouchEnd))}},{key:"updatePosition",value:function(){var e=nt.pixelToDate(this.state.left,this.props.nowposition,this.props.dayWidth||0),t=nt.pixelToDate(this.state.left+this.state.width,this.props.nowposition,this.props.dayWidth||0);this.props.onUpdateTask(this.props.item,{start:e,end:t})}},{key:"dragStart",value:function(e,t){this.props.onChildDrag(!0),this.draggingPosition=e,this.setState({dragging:!0,mode:t,left:this.props.left||0,width:this.props.width||0})}},{key:"dragProcess",value:function(e){var t=this.draggingPosition-e,n=this.state.left,o=this.state.width;switch(this.state.mode){case 1:n=this.state.left-t;break;case 2:n=this.state.left-t,o=this.state.width+t;break;case 3:o=this.state.width-t}var i={item:this.props.item,position:{start:n-this.props.nowposition,end:n+o-this.props.nowposition}};this.updatePosition(),this.props.onTaskChanging(i),this.setState({left:n,width:o}),this.draggingPosition=e}},{key:"dragEnd",value:function(){this.props.onChildDrag(!1),this.updatePosition(),this.setState({dragging:!1,mode:0})}},{key:"calculateStyle",value:function(){var e=this.props.isSelected?Ke.values.dataViewPort.task.selectedStyle:Ke.values.dataViewPort.task.style,t=this.props.color?this.props.color:e.backgroundColor;return this.state.dragging?Object(v.a)(Object(v.a)({},e),{},{backgroundColor:t,left:this.state.left,width:this.state.width,height:this.props.height-5}):Object(v.a)(Object(v.a)({},e),{},{backgroundColor:t,left:this.props.left,width:this.props.width,height:this.props.height-5})}},{key:"render",value:function(){var e,t=this,n=this.calculateStyle();return Object(f.jsxs)(u.Box,{focusIndicator:!1,elevation:"medium",onMouseDown:function(e){return t.doMouseDown(e,1)},onTouchStart:function(e){return t.doTouchStart(e,1)},onClick:function(e){t.props.onSelectItem(t.props.item)},style:Object(v.a)(Object(v.a)({},n),{},{top:3,display:"flex"}),children:[Object(f.jsx)("div",{className:"timeLine-main-data-task-side",style:{top:0,left:-4,height:n.height},onMouseDown:function(e){return t.doMouseDown(e,2)},onTouchStart:function(e){return t.doTouchStart(e,2)},children:Object(f.jsx)("div",{className:"timeLine-main-data-task-side-linker",onMouseUp:function(e){return t.onCreateLinkMouseUp(e,et)},onTouchEnd:function(e){return t.onCreateLinkTouchEnd(e,et)}})}),Object(f.jsx)("div",{style:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",overflow:"hidden"},children:(null===(e=this.props.item)||void 0===e?void 0:e.showLabel)?"string"===typeof this.props.item.showLabel?this.props.item.showLabel:this.props.item.name:""}),Object(f.jsx)("div",{className:"timeLine-main-data-task-side",style:{top:0,left:n.width-3,height:n.height},onMouseDown:function(e){return t.doMouseDown(e,3)},onTouchStart:function(e){return t.doTouchStart(e,3)},children:Object(f.jsx)("div",{className:"timeLine-main-data-task-side-linker",onMouseDown:function(e){return t.onCreateLinkMouseDown(e,Ze)},onTouchStart:function(e){return t.onCreateLinkTouchStart(e,Ze)}})})]})}}]),n}(s.Component),st=function(e){Object(N.a)(n,e);var t=Object(P.a)(n);function n(e){return Object(M.a)(this,n),t.call(this,e)}return Object(z.a)(n,[{key:"render",value:function(){return Object(f.jsx)(u.Box,{className:"timeLine-main-data-row",style:Object(v.a)(Object(v.a)({},Ke.values.dataViewPort.rows.style),{},{top:this.props.top,height:this.props.itemheight,borderBottom:"2px dashed #d3d3d350",strokeDasharray:1e3,strokeDashoffset:1e3}),children:this.props.children})}}]),n}(s.Component),dt=function(e){switch(e){case"year":return 7;case"month":case"week":return 1;case"day":return 1/24;default:return 1}},ut=function(e){switch(e){case"year":return"12px";default:return 0}},pt=function(e){switch(e){case"day":return 792;case Xe:case Ge:return 28;case $e:return 4;default:return 28}},ht=n(231),ft=n.n(ht),bt=h()((function(e){var t,n=Object(s.useRef)(null),o=Object(s.useContext)(it),i=o.mode,a=o.style,r=o.dayWidth,c=o.moveTimeline,l=o.scrollLeft,d=Object(s.useState)(!1),u=Object(m.a)(d,2),p=u[0],h=u[1],b=ft()((function(t){var n,o={width:(null===t||void 0===t?void 0:t.clientWidth)||null,height:(null===t||void 0===t?void 0:t.clientHeight)||null};return o.width&&o.height&&(null===(n=e.onSize)||void 0===n||n.call(e,o)),o})),j=Object(m.a)(b,2),v=j[0],x=(j[1],function(e){h(e)});Object(s.useEffect)((function(){n.current&&(n.current.scrollLeft=0)}),[]),Object(s.useEffect)((function(){n.current&&(n.current.scrollLeft=e.scrollLeft,n.current.scrollTop=e.scrollTop)}),[e.scrollLeft,e.scrollTop]);i&&(null===a||void 0===a?void 0:a.background)?null===a||void 0===a||null===(t=a.background)||void 0===t||t.call(a,i,r||0):("".concat(dt(e.mode||"month")*(r||0)*2,"px 100%"),ut(e.mode||"month"));return Object(f.jsxs)("div",{ref:n,id:"timeLinedataViewPort",className:"".concat(e.className," timeLine-main-data-viewPort"),onWheel:function(e){null===c||void 0===c||c((l||0)+e.deltaX)},onMouseDown:function(t){0!==t.button||p||e.onMouseDown(t)},onMouseMove:function(t){e.onMouseMove(t,n.current)},onMouseUp:e.onMouseUp,onMouseLeave:e.onMouseLeave,onTouchStart:function(t){p||e.onTouchStart(t)},onTouchMove:function(t){e.onTouchMove(t,n.current)},onTouchEnd:e.onTouchEnd,onTouchCancel:e.onTouchCancel,children:[v,Object(f.jsx)("div",{className:"timeLine-main-data-container",style:{background:"transparent",height:"100%",width:Je,maxWidth:Je},children:function(){for(var t=[],n=e.startRow;n<e.endRow+1;n++){var o=e.data[n];if(!o)break;var i=nt.dateToPixel(o.start,e.nowposition,r||0),a=nt.dateToPixel(o.end,e.nowposition,r||0)-i;t.push(Object(f.jsx)(st,{isSelected:e.selectedItem==o,label:o.name,top:n*(e.itemheight+5),left:20,itemheight:e.itemheight+5,children:Object(f.jsx)(lt,{item:o,label:o.name,nowposition:e.nowposition,dayWidth:r,color:o.color,left:i,width:a,height:e.itemheight,onChildDrag:x,isSelected:e.selectedItem==o,onSelectItem:e.onSelectItem,onStartCreateLink:e.onStartCreateLink,onFinishCreateLink:e.onFinishCreateLink,onTaskChanging:e.onTaskChanging,onUpdateTask:e.onUpdateTask,children:" "})},n))}return t}()})]})}))(fe||(fe=Object(l.a)(["\n.timeLine-main-data-container{\n  background: ;\n  }\n\n"]))),jt=function(e){Object(N.a)(n,e);var t=Object(P.a)(n);function n(e){var o;return Object(M.a)(this,n),(o=t.call(this,e)).calcNormCoordinates=function(){var e;return{cpt1:{x:e=o.props.start.x+(o.props.end.x-o.props.start.x)/2,y:o.props.start.y},cpt2:{x:e,y:o.props.end.y}}},o.calcSCoordinates=function(){var e={x:o.props.start.x+20,y:o.props.start.y},t=(o.props.end.y-o.props.start.y)/2,n={x:e.x,y:e.y+t},i={x:o.props.end.x-20,y:n.y};return{cpt1:e,cpt2:n,cpt3:i,cpt4:{x:i.x,y:i.y+t}}},o.getPath=function(e){var t=null;return o.props.start.x>o.props.end.x?(t=o.calcSCoordinates(),"M".concat(o.props.start.x," ").concat(o.props.start.y,"  ").concat(t.cpt1.x," ").concat(t.cpt1.y," ").concat(t.cpt2.x," ").concat(t.cpt2.y," ").concat(t.cpt3.x," ").concat(t.cpt3.y," ").concat(t.cpt4.x," ").concat(t.cpt4.y," ").concat(o.props.end.x," ").concat(o.props.end.y)):(t=o.calcNormCoordinates(),"M".concat(o.props.start.x," ").concat(o.props.start.y,"  ").concat(t.cpt1.x," ").concat(t.cpt1.y," ").concat(t.cpt2.x," ").concat(t.cpt2.y," ").concat(o.props.end.x," ").concat(o.props.end.y))},o.onSelect=function(e){o.props.onSelectItem&&o.props.onSelectItem(o.props.item)},o}return Object(z.a)(n,[{key:"render",value:function(){var e=this.props.isSelected?Ke.values.links.selectedColor:Ke.values.links.color;return Object(f.jsxs)("g",{className:"timeline-link",children:[Object(f.jsx)("path",{pointerEvents:"stroke",onMouseDown:this.onSelect,stroke:"white",d:this.getPath(),strokeLinejoin:"round",fill:"transparent",strokeWidth:"4",cursor:"pointer"}),Object(f.jsx)("path",{pointerEvents:"stroke",onMouseDown:this.onSelect,stroke:e,d:this.getPath(),strokeLinejoin:"round",fill:"transparent",strokeWidth:"1",cursor:"pointer",markerEnd:"url(#arrow)"})]})}}]),n}(s.Component),vt=function(e){Object(N.a)(n,e);var t=Object(P.a)(n);function n(e){var o;return Object(M.a)(this,n),(o=t.call(this,e)).init=void 0,o.lastX=void 0,o.lastY=void 0,o.doMouseMove=function(e){o.init||(o.lastX=e.clientX,o.lastY=e.clientY,o.init=!0);var t=o.state.x+(e.clientX-o.lastX),n=o.state.y+(e.clientY-o.lastY);o.lastX=e.clientX,o.lastY=e.clientY,o.setState({x:t,y:n})},o.doMouseUp=function(e){o.props.onFinishCreateLink()},o.state={x:o.props.start.x,y:o.props.start.y},o.init=!1,o.lastX=-1,o.lastY=-1,o}return Object(z.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousemove",this.doMouseMove),document.addEventListener("mouseup",this.doMouseUp)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.doMouseMove),document.removeEventListener("mouseup",this.doMouseUp)}},{key:"render",value:function(){return Object(f.jsx)(jt,{start:{x:this.props.start.x,y:this.props.start.y},end:{x:this.state.x,y:this.state.y}},-1)}}]),n}(s.Component),mt=function(e){var t,n,o,i,a=function(e){var t=Object(s.useContext)(it).data;return null===t||void 0===t?void 0:t.map((function(e,t){return Object(v.a)(Object(v.a)({},e),{},{index:t})})).find((function(t){return t.id==e}))}((null===(t=e.taskToCreate)||void 0===t||null===(n=t.task)||void 0===n?void 0:n.id)||""),r=(function(e){var t=Object(s.useContext)(it).links;null===t||void 0===t||t.map((function(e,t){return Object(v.a)(Object(v.a)({},e),{},{index:t})})).find((function(t){return t.id==e}))}(null===(o=e.taskToCreate)||void 0===o||null===(i=o.task)||void 0===i?void 0:i.id),function(){var e=Object(s.useContext)(it).links;return null===e||void 0===e?void 0:e.map((function(e,t){return Object(v.a)(Object(v.a)({},e),{},{index:t})}))}()),c=Object(s.useContext)(it),l=c.data,d=c.dayWidth,u=Object(s.useState)(null),p=Object(m.a)(u,2),h=(p[0],p[1],Object(s.useState)()),b=Object(m.a)(h,2),j=(b[0],b[1],Object(s.useState)([])),x=Object(m.a)(j,2),O=(x[0],x[1],function(t,n,o,i){if(t.end&&n.start){var a=g(t.index,t.end),r=g(n.index,n.start);return Object(f.jsx)(jt,{item:o,start:{x:a.x,y:a.y},end:{x:r.x,y:r.y},isSelected:e.selectedItem==o,onSelectItem:e.onSelectItem},o.id)}}),g=function(t,n){var o=(e.itemheight||0)+5;return{x:nt.dateToPixel(n,0,d||0),y:t*o+o/2}};return Object(f.jsxs)("svg",{x:0,y:0,width:"100%",pointerEvents:"none",style:{position:"absolute",top:0,userSelect:"none",height:"100%"},children:[Object(f.jsx)("defs",{children:Object(f.jsx)("marker",{id:"arrow",viewBox:"0 0 10 10",refX:"5",refY:"5",markerWidth:"9",markerHeight:"9",orient:"auto-start-reverse",children:Object(f.jsx)("path",{d:"M 0 0 L 10 5 L 0 10 z",strokeLinejoin:"round"})})}),Object(f.jsxs)("g",{transform:"matrix(1,0,0,1,".concat(-((e.scrollLeft||0)-(e.nowposition||0)),",").concat(-(e.scrollTop||0),")"),children:[function(){var e=[],t={},n={};if(0!=(null===l||void 0===l?void 0:l.length)){for(var o=function(o){var i=null===r||void 0===r?void 0:r[o];return i?(t=null===l||void 0===l?void 0:l.find((function(e){return e.id==(null===i||void 0===i?void 0:i.source)})))&&(n=null===l||void 0===l?void 0:l.find((function(e){return e.id==(null===i||void 0===i?void 0:i.target)})))?void(e=e.concat([O(t,n,i)])):"continue":{v:void 0}},i=0;i<(r||[]).length;i++){var a=o(i);if("continue"!==a&&"object"===typeof a)return a.v}return e}}(),function(){var t;if(e.interactiveMode&&(null===(t=e.taskToCreate)||void 0===t?void 0:t.task.id)){if(!a||!a.end)return console.error("No link");var n=g(null===a||void 0===a?void 0:a.index,null===a||void 0===a?void 0:a.end);return Object(f.jsx)(vt,{start:n,onFinishCreateLink:e.onFinishCreateLink})}}()]})]})},xt=function(e){Object(N.a)(n,e);var t=Object(P.a)(n);function n(e){var o;return Object(M.a)(this,n),(o=t.call(this,e)).textInput=d.a.createRef(),o.isFocus=void 0,o.onFocus=function(){o.setState({editing:!0})},o.onBlur=function(){o.finishEditing()},o.handleKey=function(e){13===(e.keyCode||e.which)&&o.finishEditing()},o.finishEditing=function(){o.isFocus=!1,o.setState({editing:!1}),o.props.onChange&&o.props.onChange(o.state.value)},o.handleChange=function(e){o.setState({value:e.target.value})},o.renderDiv=function(){return Object(f.jsxs)("div",{tabIndex:o.props.index,onClick:o.onFocus,onFocus:o.onFocus,style:{width:"100%"},children:[" ",o.state.value]})},o.renderEditor=function(){return Object(f.jsx)("input",{ref:o.textInput,onBlur:o.onBlur,style:{width:"100%",outlineColor:"black",outlineStyle:"oinset"},type:"text",name:"name",value:o.state.value,onKeyUp:o.handleKey,onChange:o.handleChange})},o.isFocus=!1,o.state={editing:!1,value:o.props.value},o}return Object(z.a)(n,[{key:"componentDidUpdate",value:function(e,t){this.textInput.current&&!this.isFocus&&(this.textInput.current.focus(),this.isFocus=!0)}},{key:"shouldComponentUpdate",value:function(e,t){return e.value!=this.props.value&&this.setState({value:e.value}),!0}},{key:"render",value:function(){return this.state.editing?this.renderEditor():this.renderDiv()}}]),n}(s.Component),Ot=function(e){Object(N.a)(n,e);var t=Object(P.a)(n);function n(e){var o;return Object(M.a)(this,n),(o=t.call(this,e)).onChange=function(e){o.props.onUpdateTask&&o.props.onUpdateTask(o.props.item,{name:e})},o}return Object(z.a)(n,[{key:"render",value:function(){var e=this;return Object(f.jsxs)(u.Box,{direction:"row",align:"center",pad:"small",justify:"between",style:{top:this.props.top,height:this.props.itemheight+5},onClick:function(t){return e.props.onSelectItem(e.props.item)},children:[Object(f.jsx)("div",{className:"color-dot",style:{width:12,height:12,borderRadius:12,marginRight:8,background:this.props.item.color}}),this.props.nonEditable?Object(f.jsx)(u.Box,{tabIndex:this.props.index,children:this.props.label}):Object(f.jsx)(xt,{value:this.props.label,index:this.props.index,onChange:this.onChange})]})}}]),n}(s.Component),gt=(s.Component,function(e){var t,n=Object(s.useRef)(null),o=Object(s.useContext)(it),i=o.data,a=o.itemHeight;t=(i||[]).length;return Object(f.jsxs)(u.Box,{className:"timeLine-side",children:[Object(f.jsx)(u.Box,{height:"60px",background:"neutral-4",elevation:"small",align:"center",justify:"center",pad:"small",direction:"row",children:Object(f.jsx)("div",{children:Ke.values.taskList.title.label})}),Object(f.jsx)(u.Box,{background:"accent-1",ref:n,className:"timeLine-side-task-viewPort",onScroll:function(){n.current&&e.onScroll(n.current.scrollTop)},children:Object(f.jsx)(u.Box,{className:"timeLine-side-task-container",style:{display:"flex"},children:function(t){for(var n=[],o=e.startRow;o<e.endRow+1;o++){var i=t[o];if(!i)break;n.push(Object(f.jsx)(Ot,{index:o,item:i,label:i.name,top:o*((a||0)+5),itemheight:a,isSelected:e.selectedItem==i,onUpdateTask:e.onUpdateTask,onSelectItem:e.onSelectItem,nonEditable:e.nonEditable},o))}return n}(i||[])})})]})}),yt=function(){function e(){var t=this;Object(M.a)(this,e),this.lower_limit=void 0,this.upper_limit=void 0,this._dataToRender=void 0,this.nowposition=void 0,this.daywidth=void 0,this.lower_data_limit=void 0,this.upper_data_limit=void 0,this.initialise=function(e,n,o,i){t.nowposition=o,t.daywidth=i,t.setLimits(e,n),t.loadDataHorizon()},this.setStartEnd=function(e,n,o,i){t.nowposition=o,t.daywidth=i,t.needData(e,n)&&(t.setLimits(e,n),t.loadDataHorizon())},this.needData=function(e,n){return e<t.lower_data_limit||n>t.upper_data_limit},this.setLimits=function(e,n){t.lower_limit=e-30,t.lower_data_limit=e-15,t.upper_limit=n+30,t.upper_data_limit=n+15},this.loadDataHorizon=function(){var e=nt.pixelToDate(t.lower_limit,t.nowposition,t.daywidth),n=nt.pixelToDate(t.upper_limit,t.nowposition,t.daywidth);t.onHorizonChange(e,n)},this.lower_limit=0,this.upper_limit=0,this._dataToRender=[]}return Object(z.a)(e,[{key:"onHorizonChange",value:function(e,t){throw new Error("Method not implemented.")}}]),e}(),wt=h()((function(e){var t=Object(s.useState)(!1),n=Object(m.a)(t,2),o=n[0],i=n[1],a=Object(s.useState)(0),r=Object(m.a)(a,2),c=r[0],l=r[1],d=Object(s.useState)(24e3),p=Object(m.a)(d,2),h=p[0],b=p[1],j=Object(s.useState)(0),v=Object(m.a)(j,2),x=v[0],O=v[1],g=Object(s.useState)(0),y=Object(m.a)(g,2),w=y[0],S=y[1],k=Object(s.useState)(),_=Object(m.a)(k,2),C=_[0],T=_[1],D=Object(s.useState)(),I=Object(m.a)(D,2),E=I[0],B=I[1],L=Object(s.useState)(40),M=Object(m.a)(L,2),z=M[0],N=M[1],P=Object(s.useState)(60),R=Object(m.a)(P,2),A=R[0],H=R[1],F=Object(s.useState)(0),U=Object(m.a)(F,2),q=U[0],W=U[1],K=Object(s.useState)({width:200}),Y=Object(m.a)(K,2),Q=Y[0],V=Y[1],J=Object(s.useRef)(pt(e.mode||"month")),X=Object(s.useState)(0),G=Object(m.a)(X,2),$=G[0],Z=G[1],ee=Object(s.useState)(!1),te=Object(m.a)(ee,2),ne=te[0],oe=te[1],ie=Object(s.useState)(e.mode?e.mode:Ge),ae=Object(m.a)(ie,2),re=ae[0],ce=ae[1],le=Object(s.useState)({width:1,height:1}),se=Object(m.a)(le,2),de=se[0],ue=se[1],pe=Object(s.useState)(),he=Object(m.a)(pe,2),fe=he[0],be=he[1],je=Object(s.useState)(),ve=Object(m.a)(je,2),me=ve[0],xe=ve[1],Oe=Object(s.useRef)(new yt),ge=Object(s.useState)(),ye=Object(m.a)(ge,2),we=ye[0],Se=(ye[1],Object(s.useState)()),ke=Object(m.a)(Se,2),_e=ke[0],Ce=ke[1],Te=Object(s.useState)([]),De=Object(m.a)(Te,2),Ie=De[0],Ee=De[1],Be=Object(s.useState)([]),Le=Object(m.a)(Be,2),Me=Le[0],ze=Le[1];Object(s.useEffect)((function(){Oe.current.onHorizonChange=He,Ke.load(e.config),Oe.current.initialise(w+q,w+q+de.width,q,J.current)}),[]);var Ne=function(t,n,o){var i=Math.trunc(o/(e.itemheight||0));return{start:i,end:i+t>=n.length?n.length:i+t}},Pe=function(){Oe.current.setStartEnd(w,w+de.width,q,J.current)},Re=function(t){var n,o,i,a=q,r=-1;t>h?(a=q-h-0,r=0):t<=0?(a=q+h+14,r=h):r=t;var c=Math.trunc((t-q)/J.current);i=(o=Math.trunc(x/(e.itemheight||0)))+z>=(e.data||[]).length?(e.data||[]).length-1:o+z,Pe(),Z(c);var l,s=new Date,d=e.date;(s.setHours(0,0,0,0),null===d||void 0===d||d.setHours(0,0,0,0),s.setDate(s.getDate()+c),(null===(n=e.date)||void 0===n?void 0:n.getTime())!=s.getTime())&&(null===(l=e.onDateChange)||void 0===l||l.call(e,s));W(a),Ce(_e),S(r),T(o),B(i)},Ae=function(e){b((1-e.width/Je)*Je-1)},He=function(t,n){e.onHorizonChange&&e.onHorizonChange(t,n)},Fe=function(t){e.onSelectItem&&t!=e.selectedItem&&e.onSelectItem(t)},qe=function(t,n){if(console.log("End Link",t,fe,e.onCreateLink),e.onCreateLink&&t&&fe&&fe.task.id!=t.id){if(!fe.task.id||!t.id)return;var o={id:Object(Ue.a)(),source:fe.task.id,sourceHandle:fe.position,target:t.id,targetHandle:n};console.log("New link",o),e.onCreateLink(o)}oe(!1),be(void 0)},We=function(e,t){return console.log(e,t||J),Math.ceil(e.width/(t||J.current))+30},Ye=function(e){if(console.log("Change mode",e),e!=re){var t=pt(e),n=Math.ceil(-$*t/h),o=($*t+q)%h;console.log(e,t),ce(e),J.current=t,H(We(de,t)),W(n*h),S(o)}};return Object(s.useEffect)((function(){e.data&&Ee(e.data)}),[e.data]),Object(s.useEffect)((function(){e.links&&ze(e.links)}),[e.links]),Object(s.useEffect)((function(){e.mode&&Ye(e.mode)}),[e.mode]),console.log(Ie,e.data),Object(f.jsx)(it.Provider,{value:{data:Ie,links:Me,style:e.style,mode:re,scrollLeft:w,moveTimeline:Re,changeMode:Ye,dayWidth:J.current,itemHeight:e.itemheight},children:Object(f.jsxs)(u.Box,{overflow:"hidden",round:"small",className:"".concat(e.className," timeLine"),style:{position:"relative",flex:1},children:[Object(f.jsxs)("div",{className:"timeLine-side-main",style:Q,children:[Object(f.jsx)(gt,{startRow:C,endRow:E,selectedItem:e.selectedItem,onSelectItem:Fe,onUpdateTask:e.onUpdateTask,onScroll:function(t){if(t!=t){var n=Ne(z,e.data||[],t);n.start!==C&&(O(t),T(n.start),B(n.end))}},nonEditable:e.nonEditableName}),Object(f.jsx)(Ve,{enabled:e.resizable,onTaskListSizing:function(e){V({width:e})}})]}),Object(f.jsxs)("div",{className:"timeLine-main",children:[Object(f.jsx)(u.Box,{style:{position:"absolute",height:"100%",width:"100%",top:0,left:0},className:"header-container",children:Object(f.jsx)(rt,{headerData:_e,numVisibleDays:A,currentday:$,nowposition:q,scrollLeft:w})}),Object(f.jsxs)(u.Box,{style:{position:"absolute",width:"100%",height:"calc(100% - 60px)",zIndex:9,top:60,left:0},children:[Object(f.jsx)(bt,{scrollLeft:w,scrollTop:x,itemheight:e.itemheight,nowposition:q,startRow:C,endRow:E,data:e.data,selectedItem:e.selectedItem,onScroll:we,onMouseDown:function(e){i(!0),l(e.clientX)},onMouseMove:function(e){if(o){var t=c-e.clientX;0!==t&&(l(e.clientX),Re(w+t))}},onMouseUp:function(e){i(!1)},onMouseLeave:function(e){i(!1)},onTouchStart:function(e){i(!0),l(e.touches[0].clientX)},onTouchMove:function(e){if(o){var t=c-e.touches[0].clientX;0!==t&&(l(e.touches[0].clientX),Re(w+t))}},onTouchEnd:function(e){i(!1)},onTouchCancel:function(e){i(!1)},onSelectItem:Fe,onUpdateTask:e.onUpdateTask,onTaskChanging:function(e){console.log("Changing task",e),xe(e)},onStartCreateLink:function(e,t){console.log("=> Start Link",e,t),oe(!0),be({task:e,position:t})},onFinishCreateLink:qe,boundaries:{lower:w,upper:w+de.width},onSize:function(t){console.log(t,J),Ae(t),Pe();var n=Math.ceil(t.height/(e.itemheight||0)),o=We(t,J.current),i=Ne(n,e.data||[],x);H(o),console.log("DAYS",o),N(n),T(i.start),B(i.end),ue(t)}}),Object(f.jsx)(mt,{scrollLeft:w,scrollTop:x,startRow:C,endRow:E,data:e.data||[],nowposition:q,interactiveMode:ne,taskToCreate:fe,onFinishCreateLink:qe,changingTask:me,selectedItem:e.selectedItem,onSelectItem:Fe,itemheight:e.itemheight,links:e.links||[]})]})]})]})})}))(be||(be=Object(l.a)(["\n \n  display: flex;\n  flex-direction: row;\n  flex: 1;\n  border: solid 1px rgb(207, 207, 205);\n  font-size: 12px;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n\n/* Main Area */\n\n.timeLine-main {\n  flex: 1 1 100%;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  overflow-y: hidden;\n}\n/* Main Area Header*/\n\n.timeLine-main-header-viewPort {\n  flex: 1;\n  position: relative;\n  height: 100%;\n  width: 100%;\n  background-color: rgb(112, 112, 112);\n  overflow: hidden;\n}\n\n.timeLine-main-header-container {\n  flex: 0 0 60px;\n  position: relative;\n  top: 0;\n  left: 0;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  background-color: #333333;\n  overflow: hidden;\n  user-select: none;\n}\n\n.timeLine-main-header-day-item {\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  background-color: rgb(112, 112, 112);\n  font-size: 10px;\n  text-align: center;\n  border-right: solid 1px;\n  border-top: solid 1px;\n  border-bottom: solid 1px;\n  top: 20px;\n  height: 40px;\n  color: white;\n  text-align: center;\n}\n\n.timeLine-main-header-top-item {\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  border-right: solid 1px white;\n  height: 20px;\n  z-index: 91;\n}\n\n.timeLine-main-header-day-week {\n  flex: 0 0 12px;\n  padding: 4px;\n  z-index: 90;\n}\n\n.timeLine-main-header-day-month {\n  top: 0px;\n  position: sticky;\n  flex: 0 0 15px;\n  padding: 5px;\n  z-index: 90;\n}\n\n.timeLine-main-header-time {\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  height: 22px;\n  justify-content: stretch;\n}\n\n.timeLine-main-header-time-item {\n  border-left: solid 1px silver;\n  border-bottom: solid 1px silver;\n  border-top: solid 1px silver;\n  text-align: center;\n  padding-top: 5px;\n}\n/* Main Area Data*/\n\n.timeLine-main-data-viewPort {\n  flex: 1 1 auto;\n  position: relative;\n  overflow: hidden;\n}\n.timeLine-main-data-container {\n  position: relative;\n  top: 0;\n  left: 0;\n  height: 100%;\n  background-color: rgb(255, 255, 255);\n}\n\n.timeLine-main-data-row {\n  position: absolute;\n  width: 100%;\n  height: 50px;\n}\n\n.timeLine-main-data-task {\n  position: absolute;\n  background-color: darkorchid;\n  border-radius: 14px;\n  color: white;\n  text-align: center;\n}\n\n.timeLine-main-data-task-side {\n  position: absolute;\n  width: 10px;\n  cursor: col-resize;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n.timeLine-main-data-task-side-linker {\n  width: 8px;\n  height: 8px;\n  border-radius: 4px;\n  cursor: default;\n  z-index: 100;\n}\n.timeLine-main-data-task-side-linker:hover {\n  background-color: black;\n  border: solid 0.5px grey;\n}\n/* .timeLine-main-data-task:hover {\n    background-color:chocolate;\n    border:solid 2px darkorchid;\n    cursor: move;\n} */\n\n.timeLine-main-data-verticalLine {\n  flex: 1 1 auto;\n  height: 100%;\n  width: 24px;\n  background-color: white;\n  border-left-width: 0.5px;\n  border-left-color: rgb(207, 207, 205);\n  border-left-style: dashed;\n}\n\n/* Side Area */\n\n.timeLine-side-main {\n  flex: 0 0 auto;\n  width: 108px;\n  min-width: 108px;\n  display: flex;\n  flex-direction: row;\n}\n\n.timeLine-side {\n  flex: 1 0 100px;\n  display: flex;\n  flex-direction: column;\n  border-right: solid 1px rgb(207, 207, 205);\n}\n\n.verticalResizer {\n  flex: 0 0 8px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  cursor: col-resize;\n  border-right: solid 1px rgb(207, 207, 205);\n  height: 100%;\n}\n.squareGrip {\n  flex: 0 0 auto;\n\n  border-radius: 50%;\n  height: 5px;\n  width: 5px;\n  margin: 3px 0;\n}\n\n.timeLine-side-title {\n  flex: 0 0 60px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.timeLine-side-task-viewPort {\n  position: relative;\n  flex: 1 1 auto;\n  height: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n\n.timeLine-side-task-container {\n  position: relative;\n  overflow-x: hidden;\n  overflow-y: hidden;\n}\n\n.timeLine-side-task-row {\n  background-color: rgb(112, 112, 112);\n  border-bottom-width: 0.5px;\n  border-bottom-color: rgb(207, 207, 205);\n  border-bottom-style: solid;\n  height: 30px;\n  color: grey;\n  text-align: center;\n  text-overflow: ellipsis;\n  outline: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n}\n\n"])))},560:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),a=n(21),r=n.n(a),c=(n(243),n(2)),l=n(139),s=n(28),d=(n(244),n(1)),u=n(4),p=n(9),h=n.n(p),f=n(15),b=n(17),j=n(18),v=n(221),m=n.n(v),x=function(){function e(t){Object(b.a)(this,e),this.instance=void 0,this.clientId=void 0,this.clientSecret=void 0,this.authorizationServer=void 0,this.redirectUri=void 0,this.clientId=t.clientId,this.clientSecret=t.clientSecret,this.authorizationServer=t.authorizationServer,this.redirectUri=t.redirectUri,this.instance=m.a.create({baseURL:this.authorizationServer,timeout:1e3,headers:{},maxRedirects:0}),console.log("Set up auth client")}return Object(j.a)(e,[{key:"getUserInfo",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.instance.get("/user",{headers:{Authorization:"Bearer "+t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadToken",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var n,o,i,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=18;break}return e.prev=1,e.next=4,this.getToken(t);case 4:o=e.sent,console.log(o),o.accessToken&&(n=o.accessToken),e.next=16;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,this.refreshToken();case 13:i=e.sent,console.log(i),i.accessToken&&(n=i.accessToken);case 16:e.next=23;break;case 18:return e.next=20,this.refreshToken();case 20:a=e.sent,console.log(a),a.accessToken&&(n=a.accessToken);case 23:return e.abrupt("return",n);case 24:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getToken",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new URLSearchParams).append("client_id",this.clientId),n.append("client_secret",this.clientSecret),n.append("grant_type","authorization_code"),n.append("response_type","code"),n.append("code",t),e.next=8,this.instance.post("/oauth/token",n,{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0});case 8:return o=e.sent,e.abrupt("return",o.data);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"refreshToken",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new URLSearchParams).append("client_secret",this.clientSecret),t.append("client_id",this.clientId),t.append("grant_type","refresh_token"),e.next=6,this.instance.post("/oauth/token",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0});case 6:return n=e.sent,e.abrupt("return",n.data);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAuthorizationCode",value:function(){var e=Object(f.a)(h.a.mark((function e(t,n){var o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.instance.post("/oauth/authorize",{client_id:this.clientId,grant_type:"authorization_code",redirect_uri:this.redirectUri,response_type:"code",username:t,password:n},{withCredentials:!0});case 3:o=(o=e.sent).data,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),o=e.t0.response;case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),O=Object(o.createContext)({}),g=function(e){var t=Object(o.useState)(),n=Object(u.a)(t,2),i=n[0],a=n[1],r=function(){var e=Object(o.useState)(),t=Object(u.a)(e,2),n=t[0],i=t[1];return Object(o.useEffect)((function(){window.addEventListener("storage",(function(e){var t,o;try{o=JSON.parse(window.sessionStorage.getItem("CREDENTIALS_TOKEN")||"")}catch(a){}switch(e.key){case"REQUESTING_SHARED_CREDENTIALS":window.localStorage.setItem("CREDENTIALS_SHARING",JSON.stringify({token:n})),window.localStorage.removeItem("CREDENTIALS_SHARING");break;case"CREDENTIALS_SHARING":e.newValue&&window.sessionStorage.setItem("CREDENTIALS_TOKEN",e.newValue||""),o&&i((null===(t=o)||void 0===t?void 0:t.token)||void 0);break;case"CREDENTIALS_FLUSH":window.sessionStorage.removeItem("CREDENTIALS_TOKEN")}})),window.localStorage.setItem("REQUESTING_SHARED_CREDENTIALS",Date.now().toString()),window.localStorage.removeItem("REQUESTING_SHARED_CREDENTIALS")}),[]),[n,function(e){console.log("Update token"),i(e),window.sessionStorage.setItem("CREDENTIALS_TOKEN",e||""),window.localStorage.setItem("CREDENTIALS_SHARING",JSON.stringify({token:e})),window.localStorage.removeItem("CREDENTIALS_SHARING")},function(){window.localStorage.setItem("CREDENTIALS_FLUSH",Date.now().toString()),window.localStorage.removeItem("CREDENTIALS_FLUSH")}]}(),c=Object(u.a)(r,2),l=c[0],s=c[1],p=Object(o.useRef)({}),h=Object(o.useState)(),f=Object(u.a)(h,2),b=f[0],j=f[1];return Object(o.useEffect)((function(){(console.log("Setting up",b),b)||function(e){j(e),p.current.client=e}(new x({authorizationServer:e.authorizationServer||"http://localhost:8090",clientId:e.clientId||"command-hexhive.io",clientSecret:e.clientSecret||"tester",redirectUri:e.redirectUri||"http://localhost:3000/dashboard"}))}),[]),Object(o.useEffect)((function(){if(b&&!l){var e=new URLSearchParams(window.location.search).get("code");null===b||void 0===b||b.loadToken(e||void 0).then((function(e){s(e),console.log(e)})).catch((function(){window.location.href="https://hexhive.io/login"}))}}),[b]),Object(o.useEffect)((function(){console.log("user info",l),l&&(null===b||void 0===b||b.getUserInfo(l).then((function(e){e.user&&a(e.user),console.log("user info",e)})))}),[l]),Object(d.jsx)(O.Provider,{value:{token:l,client:b,activeUser:i},children:e.children instanceof Function?e.children(l):e.children})},y=n(56),w=n(7);var S=function(e){return Object(d.jsx)("svg",Object(w.a)(Object(w.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 45.98 50.65"},e),{},{children:Object(d.jsxs)("g",{fill:"#383232",children:[Object(d.jsx)("path",{d:"M33.48 4.67h-1v-3a1.68 1.68 0 00-3.36 0v3H16.84v-3a1.68 1.68 0 10-3.36 0v3h-1A12.52 12.52 0 00-.04 17.17v21a12.52 12.52 0 0012.51 12.51h21a12.52 12.52 0 0012.49-12.54v-21A12.52 12.52 0 0033.48 4.67zm9.14 33.47a9.15 9.15 0 01-9.14 9.15h-21a9.16 9.16 0 01-9.15-9.15v-21A9.16 9.16 0 0112.48 8h1v1.49a1.68 1.68 0 003.36 0V8.03h12.31v1.49a1.68 1.68 0 003.36 0V8.03h1a9.15 9.15 0 019.14 9.14z"}),Object(d.jsx)("path",{d:"M38.47 17.34H7.52a1.68 1.68 0 000 3.36h30.95a1.68 1.68 0 100-3.36zM27.86 23.68h-9.73a1.69 1.69 0 000 3.38h7.22a39 39 0 00-6.33 13.46 1.7 1.7 0 001.65 2.1h.77a1.68 1.68 0 001.65-1.36 40.28 40.28 0 016.16-14.1 1.7 1.7 0 00.3-.95v-.87a1.69 1.69 0 00-1.69-1.66z"})]})}))};var k=function(e){return Object(d.jsx)("svg",Object(w.a)(Object(w.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 45.98 45.98"},e),{},{children:Object(d.jsx)("path",{d:"M33.48 0h-21A12.52 12.52 0 00-.03 12.5v21a12.52 12.52 0 0012.51 12.51h21A12.52 12.52 0 0045.99 33.5v-21A12.52 12.52 0 0033.48 0zM15.72 33l-4.44-7.85a1.08 1.08 0 010-1.06l5.35-9.27a1.08 1.08 0 01.18-.24v7.46a2.72 2.72 0 001.35 2.35l3.48 2a2.71 2.71 0 002.71 0l3.45-2a2.69 2.69 0 001.34-2.33v-7.39a1.67 1.67 0 01.12.16l5.42 9.31a1.08 1.08 0 010 1.07l-4.35 7.56a1.69 1.69 0 00-.23.84v9H15.93v-8.77a1.71 1.71 0 00-.21-.82zm26.9.45a9.15 9.15 0 01-9.12 9.15v-8.58l4.12-7.18a4.44 4.44 0 000-4.43l-5.43-9.31a4.45 4.45 0 00-3.82-2.2h-.88a1.69 1.69 0 00-1.68 1.69v9l-2.8 1.63-2.82-1.55v-9.06a1.69 1.69 0 00-1.68-1.69h-.94a4.44 4.44 0 00-3.84 2.22l-5.36 9.29a4.46 4.46 0 000 4.39l4.22 7.47v8.38h-.06a9.15 9.15 0 01-9.14-9.15v-21a9.15 9.15 0 019.14-9.14h21a9.15 9.15 0 019.1 9.12z",fill:"#383232"})}))};var _=function(e){return Object(d.jsx)("svg",Object(w.a)(Object(w.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 45.35 45.35"},e),{},{children:Object(d.jsxs)("g",{fill:"#383232",children:[Object(d.jsx)("path",{d:"M33.01 0H12.33A12.35 12.35 0 000 12.36v20.68a12.35 12.35 0 0012.33 12.32h20.68a12.35 12.35 0 0012.34-12.34V12.36A12.35 12.35 0 0033.01 0zm9 33a9 9 0 01-9 9H12.33a9 9 0 01-9-9V12.36a9 9 0 019-9h20.68a9 9 0 019 9z"}),Object(d.jsx)("path",{d:"M35 21.57h-1a1.66 1.66 0 000 3.32h1a1.66 1.66 0 000-3.32zM35 27.04h-1a1.66 1.66 0 000 3.31h1a1.66 1.66 0 100-3.31zM35 32.5h-1a1.66 1.66 0 000 3.32h1a1.66 1.66 0 000-3.32zM27.02 21.57h-1a1.66 1.66 0 000 3.32h1a1.66 1.66 0 000-3.32zM27.02 27.04h-1a1.66 1.66 0 100 3.31h1a1.66 1.66 0 100-3.31zM27.02 32.5h-1a1.66 1.66 0 100 3.32h1a1.66 1.66 0 000-3.32zM19.19 21.57h-1a1.66 1.66 0 000 3.32h1a1.66 1.66 0 000-3.32zM19.19 27.04h-1a1.66 1.66 0 000 3.31h1a1.66 1.66 0 100-3.31zM19.19 32.5h-1a1.66 1.66 0 000 3.32h1a1.66 1.66 0 000-3.32zM11.37 21.57h-1a1.66 1.66 0 000 3.32h1a1.66 1.66 0 000-3.32zM11.37 27.04h-1a1.66 1.66 0 100 3.31h1a1.66 1.66 0 100-3.31zM11.37 32.5h-1a1.66 1.66 0 000 3.32h1a1.66 1.66 0 000-3.32zM36.8 8.49H8.55a1.66 1.66 0 00-1.66 1.66v6.47a1.65 1.65 0 001.66 1.65H36.8a1.65 1.65 0 001.65-1.65v-6.47a1.65 1.65 0 00-1.65-1.66zm-1.66 6.47H10.21v-3.15h24.93z"})]})}))};var C=function(e){return Object(d.jsxs)("svg",Object(w.a)(Object(w.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 197.58 85"},e),{},{children:[Object(d.jsx)("g",{fill:"#a3b696",children:Object(d.jsx)("path",{d:"M117.59 24.85V5.76a2.73 2.73 0 012.73-2.73h2.09a2.72 2.72 0 012.73 2.73v45.58a2.71 2.71 0 01-2.73 2.72h-2.12a2.72 2.72 0 01-2.73-2.72v-19h-8.4v19a2.71 2.71 0 01-2.73 2.72h-2.12a2.72 2.72 0 01-2.7-2.72V5.76a2.73 2.73 0 012.73-2.73h2.12a2.72 2.72 0 012.73 2.73v19.09zM138.72 51.34a2.76 2.76 0 01-2.72 2.72h-2.12a2.71 2.71 0 01-2.73-2.72V5.76a2.72 2.72 0 012.73-2.73H136a2.76 2.76 0 012.72 2.73zM157.13 33.94l6.74-28.86a2.91 2.91 0 012.65-2.12h2.2a2.68 2.68 0 012.69 3.38l-10.76 45.6a2.89 2.89 0 01-2.65 2.12h-1.59a2.76 2.76 0 01-2.65-2.12l-10.8-45.6a2.62 2.62 0 012.66-3.33h2.12a3 3 0 012.67 2.07zM194.69 3.03a2.72 2.72 0 012.72 2.73v2a2.71 2.71 0 01-2.73 2.72h-11.57v14.24h9.54a2.71 2.71 0 012.72 2.73v2a2.71 2.71 0 01-2.72 2.73h-9.54v14.31h11.58a2.72 2.72 0 012.72 2.85v2a2.71 2.71 0 01-2.73 2.72h-16.35a2.71 2.71 0 01-2.72-2.72V5.76a2.72 2.72 0 012.72-2.73z"})}),Object(d.jsx)("path",{d:"M84.81 31.45a5.29 5.29 0 100-5.89h-6.54l-4-6.86h10.5a5.28 5.28 0 100-5.9H70.91l-4.17-7.21a5.68 5.68 0 00-9.85 0l-4.16 7.2h-8.26l2.45-4.26A5.69 5.69 0 0041.99 0H18.84a5.73 5.73 0 00-4.93 2.84L.75 25.64a5.7 5.7 0 000 5.69l13.16 22.79a5.73 5.73 0 004.93 2.84h23.15a5.69 5.69 0 004.93-8.53l-2.44-4.24h8.26l4.15 7.18a5.69 5.69 0 009.85 0l4.14-7.18h13.93a5.28 5.28 0 100-5.9H74.29l4-6.86zM49.32 18.69l-4 6.85h-8.26l4-6.86zM18.96 51.07l-13-22.59 13-22.59h22.68l-11.4 19.75a5.72 5.72 0 000 5.69l11.4 19.74zm22.11-12.73l-4-6.86h8.34l4 6.86zm20.74 9.82L50.48 28.52 61.81 8.84l11.34 19.64z",fill:"#a3b696"}),Object(d.jsx)("g",{fill:"#a3b696",children:Object(d.jsx)("path",{d:"M138.28 60.86h9.45v2.41h-6.8v8.07h5.48v2.42h-5.48v10.87h-2.65zM151.92 60.86h2.65v21.38h6.84v2.41h-9.45zM165.07 79.11V66.34c0-3.77 1.94-5.84 5.44-5.84s5.48 2.07 5.48 5.84v12.75c0 3.78-1.94 5.88-5.48 5.88s-5.44-2.08-5.44-5.86zm8.26.17V66.19c0-2.24-1-3.26-2.82-3.26s-2.78 1-2.78 3.26v13.09c0 2.28 1 3.3 2.78 3.3s2.82-1.02 2.82-3.3zM179.97 60.86h2.58l2.38 20.12 2.48-20.12h3l2.48 20.12 2.38-20.12h2.35l-2.93 23.79h-3.4l-2.38-18.56-2.41 18.56h-3.57z"})})]}))};var T=function(e){return Object(d.jsx)("svg",Object(w.a)(Object(w.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 45.98 45.98"},e),{},{children:Object(d.jsxs)("g",{fill:"#383232",children:[Object(d.jsx)("path",{d:"M33.48 0h-21A12.52 12.52 0 00-.03 12.5v21a12.49 12.49 0 003 8.13 1.42 1.42 0 00.12.13 12.47 12.47 0 009.38 4.25h21a12.52 12.52 0 0012.5-12.51v-21A12.52 12.52 0 0033.48 0zM3.36 12.5a9.16 9.16 0 019.15-9.14h21a9.15 9.15 0 019.14 9.14v21a9.63 9.63 0 01-.21 2 20.46 20.46 0 00-7.33-10.15l-1.38-1-1 1.39a11.91 11.91 0 01-19.43 0l-1-1.39-1.38 1a19.55 19.55 0 00-7.43 9.62 9.38 9.38 0 01-.12-1.42zm30.12 30.17h-21a9.09 9.09 0 01-6.51-2.74c.16-4.31 2-7.82 5.64-10.91a15.27 15.27 0 0022.69 0 17 17 0 015.62 10.94 9.13 9.13 0 01-6.44 2.71z"}),Object(d.jsx)("path",{d:"M22.99 28.55a9.81 9.81 0 10-9.8-9.81 9.82 9.82 0 009.8 9.81zm0-16.25a6.45 6.45 0 11-6.44 6.44 6.45 6.45 0 016.44-6.44z"})]})}))};var D=function(e){return Object(d.jsx)("svg",Object(w.a)(Object(w.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48.7 45.78"},e),{},{children:Object(d.jsxs)("g",{fill:"#383232",children:[Object(d.jsx)("path",{d:"M28.55 10.92H15.96a1.67 1.67 0 100 3.34h12.59a1.67 1.67 0 100-3.34zM24.7 18.02h-8.74a1.68 1.68 0 100 3.35h8.74a1.68 1.68 0 000-3.35z"}),Object(d.jsx)("path",{d:"M42.93 1.96a12.52 12.52 0 00-6.68-2H15.38a12.48 12.48 0 00-12.11 9.6H1.68a1.67 1.67 0 100 3.34h1.24v1.73H1.68a1.67 1.67 0 100 3.34h1.24v1.73H1.68a1.67 1.67 0 100 3.34h1.24v1.76H1.68a1.67 1.67 0 100 3.34h1.24v1.66H1.68a1.67 1.67 0 100 3.34h1.24v.15a11.75 11.75 0 00.11 1.58H1.68a1.67 1.67 0 100 3.34h2.26a12.46 12.46 0 0011.44 7.59h21.89a13.12 13.12 0 003.35-.76 12.45 12.45 0 008.06-11.64V12.46a12.36 12.36 0 00-3.17-8.3zm-6.66 40.48H15.38a9.11 9.11 0 01-7.65-4.19h.47a1.67 1.67 0 100-3.34H6.42a9.19 9.19 0 01-.15-1.58v-.15H8.2a1.67 1.67 0 100-3.34H6.27v-1.73H8.2a1.67 1.67 0 100-3.34H6.27v-1.73H8.2a1.67 1.67 0 100-3.34H6.27v-1.73H8.2a1.67 1.67 0 100-3.34H6.27V12.9H8.2a1.67 1.67 0 100-3.34H6.75a9.13 9.13 0 018.63-6.21h20.89a9.07 9.07 0 014.08 1l-.07.09c-.19.23-.38.46-.56.7l-.09.12c-.19.27-.36.54-.53.81l-.11.18c-.16.28-.32.57-.46.87-.14.29-.27.6-.39.9 0 .07 0 .13-.07.2-.11.3-.21.6-.3.91a.94.94 0 010 .16c-.07.28-.14.57-.19.86a1.1 1.1 0 000 .16c-.06.32-.1.64-.14 1v31.12a9.24 9.24 0 01-1.17.01zm9.11-9.11a9.1 9.1 0 01-4.72 8V12.46v-1-.3c0-.1.07-.43.11-.64s.05-.22.08-.33.11-.39.17-.59.07-.21.11-.32a6.5 6.5 0 01.25-.61c0-.08.07-.17.11-.25a7.19 7.19 0 01.45-.81 1 1 0 01.09-.13 7.07 7.07 0 01.44-.63l.21-.25c.08-.1.17-.19.26-.29a9.08 9.08 0 012.35 6.1z"})]})}))};var I,E=function(e){return Object(d.jsx)("svg",Object(w.a)(Object(w.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 46.14 54.82"},e),{},{children:Object(d.jsxs)("g",{fill:"#383232",children:[Object(d.jsx)("path",{d:"M33.59 8.68h-1v-7a1.69 1.69 0 00-3.38 0v7H16.9v-7a1.69 1.69 0 00-3.38 0v7h-1A12.56 12.56 0 00.04 21.23v21a12.56 12.56 0 0012.55 12.55h21a12.56 12.56 0 0012.55-12.55v-21A12.56 12.56 0 0033.59 8.68zm-4.35 3.38v2.26a3 3 0 01-3 3h-6.25a3 3 0 01-3-3v-2.26zm13.53 30.21a9.19 9.19 0 01-9.18 9.18h-21a9.18 9.18 0 01-9.17-9.18v-21a9.18 9.18 0 019.17-9.17h1v2.26a6.43 6.43 0 006.43 6.42h6.25a6.43 6.43 0 006.42-6.42v-2.3h1a9.18 9.18 0 019.18 9.17z"}),Object(d.jsx)("path",{d:"M30.69 27.51a1.68 1.68 0 00-1.65-1.7h-18.3a1.69 1.69 0 100 3.37h18.3a1.69 1.69 0 001.65-1.67zM26.81 34.65a1.69 1.69 0 00-1.69-1.68h-12.7a1.69 1.69 0 100 3.37h12.7a1.69 1.69 0 001.69-1.69zM35.22 39.9h-18.3a1.69 1.69 0 000 3.38h18.3a1.69 1.69 0 000-3.38z"})]})}))},B=(n(531),n(34)),L=function(e){var t,n,o;return Object(d.jsxs)(c.Box,{pad:{horizontal:"xsmall"},align:"center",margin:{bottom:"xsmall"},round:"xsmall",height:"50px",direction:"row",background:"accent-1",gap:"xsmall",children:[Object(d.jsx)(c.Box,{overflow:"hidden",flex:!0,background:"#ffffff42",round:"xsmall",children:Object(d.jsx)(c.TextInput,{value:null===(t=e.filter)||void 0===t?void 0:t.search,onChange:function(t){var n,o;return null===(n=e.onFilterChange)||void 0===n?void 0:n.call(e,{search:t.target.value,status:null===(o=e.filter)||void 0===o?void 0:o.status})},focusIndicator:!1,plain:!0,placeholder:"Search Jobs"})}),Object(d.jsx)(c.Box,{overflow:"hidden",background:"#ffffff42",round:"xsmall",children:Object(d.jsx)(c.Select,{value:null===(n=e.filter)||void 0===n?void 0:n.status,onChange:function(t){var n,o,i=t.option;return null===(n=e.onFilterChange)||void 0===n?void 0:n.call(e,{search:null===(o=e.filter)||void 0===o?void 0:o.search,status:i})},plain:!0,placeholder:"Status",options:["All"].concat(Array.from(new Set(null===(o=e.jobs)||void 0===o?void 0:o.map((function(e){return e.status||""})))))})})]})},M=(n(532),function(e){var t=Object(o.useState)({}),n=Object(u.a)(t,2),i=n[0],a=n[1],r=Object(o.useState)(),l=Object(u.a)(r,2),s=l[0],p=l[1],h=Object(o.useState)(),f=Object(u.a)(h,2),b=f[0],j=f[1],v=Object(o.useState)([{key:"ID",label:"Job ID",type:"int",width:30},{key:"name",label:"Job Name",type:"string",width:50},{key:"status",label:"Status",type:"string",width:20}]),m=Object(u.a)(v,2),x=(m[0],m[1],Object(B.b)({suspense:!1,staleWhileRevalidate:!0}).ProjectMany());return Object(d.jsxs)(c.Box,{flex:!0,direction:"column",children:[Object(d.jsx)(L,{filter:i,onFilterChange:function(e){return a(e)},jobs:x||[]}),Object(d.jsx)(c.Box,{overflow:{vertical:"auto"},round:"xsmall",background:"neutral-1",className:"jobs-page",children:Object(d.jsx)(c.DataTable,{background:{header:{color:"accent-1",opacity:"strong"}},pin:!0,onSort:function(e){var t=e.property,n=e.direction;j(t),p(n)},columns:[{property:"id",header:"ID",size:"xsmall",sortable:!0},{property:"name",header:"Project name",size:"large",sortable:!0},{property:"status",header:"Status",sortable:!0,size:"small",align:"center"}],onClickRow:function(t){var n,o=t.datum;return o.id&&(n={JobID:null===o||void 0===o?void 0:o.id},void e.history.push("".concat(e.match.url,"/").concat(n.JobID)))},data:function(){var e,t,n,o=null===x||void 0===x?void 0:x.map((function(e){return{id:null===e||void 0===e?void 0:e.id,name:null===e||void 0===e?void 0:e.name,status:null===e||void 0===e?void 0:e.status}}));b&&s&&(o=null===(e=o)||void 0===e?void 0:e.sort((function(e,t){var n=e,o=t;return"asc"==s?n[b]==o[b]?0:n[b]>o[b]?1:-1:n[b]==o[b]?0:n[b]<o[b]?1:-1})));i.status&&"All"!=i.status&&(o=null===(t=o)||void 0===t?void 0:t.filter((function(e){return e.status==i.status})));i.search&&(o=null===(n=o)||void 0===n?void 0:n.filter((function(e){var t,n,o=(null===(t=e.name)||void 0===t?void 0:t.toLowerCase())||"",a=(null===(n=e.id)||void 0===n?void 0:n.toLowerCase())||"",r=i.search.toLowerCase()||"";return(null===o||void 0===o?void 0:o.indexOf(r))>-1||(null===a||void 0===a?void 0:a.indexOf(r))>-1||"".concat(a," ").concat(o).indexOf(r)>-1})));return o}()})})]})}),z=n(38),N=n(235),P=n.n(N),R=window.sessionStorage.getItem("CREDENTIALS_TOKEN"),A=P.a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"/dashboard/flow",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API||"http://localhost:8081",headers:{Authorization:"Bearer "+R}}),H=function(e){var t=function(){var t=Object(f.a)(h.a.mark((function t(n,o){var i,a,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=window.sessionStorage.getItem("CREDENTIALS_TOKEN"),a=new FormData,o.forEach((function(e){a.append("files",e)})),t.next=5,e.post("/api/file?job=".concat(n),a,{headers:{Authorization:"Bearer "+i}});case 5:return r=t.sent,t.abrupt("return",r.data);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return{uploadFile:function(){var t=Object(f.a)(h.a.mark((function t(n){var o,i,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Upload file"),o=window.sessionStorage.getItem("CREDENTIALS_TOKEN"),i=new FormData,n.forEach((function(e){i.append("files",e)})),t.next=6,e.post("/api/file/",i,{headers:{Authorization:"Bearer "+o}});case 6:return a=t.sent,t.abrupt("return",a.data);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),addFilesToJob:t}}(A),F=(I=A,{getScheduleItems:function(){var e=Object(f.a)(h.a.mark((function e(t,n){var o,i,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.post("/graphql",{query:"\n                query getScheduleItemsInHorizon($start: Date, $end: Date){\n                    ScheduleMany(startDate: $start, endDate: $end){\n                        id\n                        project {\n                            id\n                            name\n                        }\n                        people\n                        date\n                        equipment\n                        notes\n                        managers\n                        owner {\n                            id\n                            name\n                        }\n                    }\n                }\n            ",variables:{start:t.start,end:t.end}},{headers:{Authorization:"Bearer "+n}});case 2:return a=e.sent,e.abrupt("return",null===(o=a.data)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.ScheduleMany);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),U=n(78),q=n.n(U),W=(n(550),["Issued","Workshop","Finished"]),K=function(e){var t=Object(o.useState)(0),n=Object(u.a)(t,2),i=n[0],a=n[1],r=Object(o.useState)([]),l=Object(u.a)(r,2),s=l[0],p=l[1],b=Object(o.useState)([]),j=Object(u.a)(b,2),v=j[0],m=(j[1],Object(o.useState)(!1)),x=Object(u.a)(m,2),O=x[0],g=x[1],S=Object(o.useState)([]),k=Object(u.a)(S,2),_=k[0],C=k[1],T=Object(o.useState)([]),D=Object(u.a)(T,2),I=(D[0],D[1],Object(o.useState)("")),E=Object(u.a)(I,2),L=(E[0],E[1],Object(o.useState)("")),M=Object(u.a)(L,2),N=(M[0],M[1],Object(o.useState)([])),P=Object(u.a)(N,2),R=P[0],A=P[1],F=Object(o.useState)(""),U=Object(u.a)(F,2),q=(U[0],U[1],e.match.params.id),K=Object(B.b)({suspense:!1,staleWhileRevalidate:!0}),Y=Object(B.c)(),Q=Object(B.a)((function(e,t){return{item:e.removeFileFromProject({id:t.id,project:t.project}),error:null}}),{onCompleted:function(e){},onError:function(e){},refetchQueries:[K.ProjectById({id:q})],suspense:!1,awaitRefetchQueries:!0}),V=Object(u.a)(Q,2),J=V[0],X=(V[1].isLoading,Object(B.a)((function(e,t){var n=e.updateFile({id:t.id,name:t.name,status:t.status});return{item:Object(w.a)({},n),error:null}}),{onCompleted:function(e){},onError:function(e){},refetchQueries:[K.ProjectById({id:q})],suspense:!1,awaitRefetchQueries:!0})),G=Object(u.a)(X,2),$=G[0],Z=(G[1],Object(B.a)((function(e,t){var n=e.updateFiles({ids:t.ids,status:t.status});return{item:null===n||void 0===n?void 0:n.slice(),error:null}}),{onCompleted:function(e){},onError:function(e){},refetchQueries:[K.ProjectById({id:q})],suspense:!1,awaitRefetchQueries:!0})),ee=Object(u.a)(Z,2),te=ee[0],ne=(ee[1],K.ProjectById({id:q}));Object(o.useEffect)((function(){console.log("JOB Changed"),ne&&ne.files&&(console.log(ne.files),A(ne.files||[]))}),[JSON.stringify(ne)]);var oe=[{title:"Files",component:Object(d.jsx)(y.d,{loading:s,uploading:v,onClick:function(e){C([e]),g(!0)},files:R||[],onDelete:function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,Promise.all(t.map(function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===ne||void 0===ne?void 0:ne.id)){e.next=3;break}return e.next=3,J({args:{project:null===ne||void 0===ne?void 0:ne.id,id:t._id}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onUpload:function(e){H.addFilesToJob(q,e).then(function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Upload result",t),e.next=3,Y(K.ProjectById({id:q}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onEdit:function(e){g(!0),C(e)},onView:function(e){g(!0),C(e)},onChange:function(e){return A(e)},jobId:q})},{title:"Project board",component:Object(d.jsx)(y.b,{onDrag:function(e){var t,n;if(console.log(null===(t=e.destination)||void 0===t?void 0:t.droppableId),void 0!=(null===(n=e.destination)||void 0===n?void 0:n.droppableId)){var o,i,a=R.slice(),r=a.map((function(e){return e.id})).indexOf(e.draggableId);a[r].status=W[parseInt((null===(o=e.destination)||void 0===o?void 0:o.droppableId)||"")],A(a);var c=ie(e.draggableId);$({args:{id:e.draggableId,status:W[parseInt(null===(i=e.destination)||void 0===i?void 0:i.droppableId)]}}).then((function(){c(),p(a)}))}},renderCard:function(e){return Object(d.jsx)(c.Box,{onClick:function(){C([e]),g(!0)},direction:"column",background:"light-2",round:"xsmall",pad:"small",children:Object(d.jsx)(c.Text,{children:e.name})})},columns:W.map((function(e){return{id:e,title:e,rows:R.filter((function(t){return t.status==e})).map((function(e){return Object(w.a)({},e)}))}}))})}],ie=function(e){return p(Array.from(new Set([].concat(Object(z.a)(s),[e])))),function(){var t=s.slice()||[],n=t.indexOf(e);t.splice(n,1),p(t)}};Object(o.useEffect)((function(){e.match.params.job}),[e.match.params.job]);return Object(d.jsxs)(c.Box,{gap:"xsmall",direction:"column",round:"xsmall",className:"job-one-container",style:{flex:1,display:"flex"},children:[Object(d.jsxs)(c.Box,{round:"xsmall",background:"accent-1",pad:{left:"small"},direction:"row",justify:"between",children:[Object(d.jsxs)(c.Heading,{level:"4",margin:"small",children:[null===ne||void 0===ne?void 0:ne.id," - ",(null===ne||void 0===ne?void 0:ne.name)||"Job Title"]}),Object(d.jsxs)(c.Box,{gap:"xsmall",direction:"row",children:[Object(d.jsx)(c.Button,{onClick:function(){return a(0)},style:{borderBottom:0==i?"3px solid #E75D3D":void 0,padding:8},plain:!0,hoverIndicator:!0,label:"Files"}),Object(d.jsx)(c.Button,{onClick:function(){return a(1)},style:{borderBottom:1==i?"3px solid #E75D3D":void 0,padding:8},plain:!0,hoverIndicator:!0,label:"Project board"})]})]}),Object(d.jsx)(y.a,{open:O,onSubmit:function(){var e=Object(f.a)(h.a.mark((function e(t){var n,o,i,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),1!=t.length){e.next=6;break}(n=t[0]).id&&(o=ie(n.id),$({args:{id:n.id,name:n.name||"",status:n.status||""}}).then((function(e){var t=e.item;console.log(t);var i=null===R||void 0===R?void 0:R.slice(),a=i.map((function(e){return e.id})).indexOf(n.id);t.id=n.id,a>-1&&(i[a]=Object(w.a)({},t)),o()}))),e.next=12;break;case 6:if(!(t.length>1)){e.next=12;break}return i=t.map((function(e){return e.id})),e.next=10,te({args:{ids:i,status:t[0].status}});case 10:a=e.sent,console.log(a);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onClose:function(){console.log("CLose"),g(!1),C([])},files:_,job:null===ne||void 0===ne?void 0:ne.id}),Object(d.jsx)(c.Box,{round:"xsmall",flex:!0,background:"neutral-1",children:Object(d.jsx)(c.Box,{height:"100%",flex:!0,children:oe[i].component})})]})},Y=(n(551),function(e){return Object(d.jsx)(c.Box,{align:"center",pad:{horizontal:"xsmall"},margin:{bottom:"xsmall"},round:"xsmall",height:"50px",direction:"row",background:"accent-1",children:Object(d.jsx)(c.Box,{background:"#ffffff42",flex:!0,round:"xsmall",children:Object(d.jsx)(c.TextInput,{value:e.filter,onChange:function(t){var n;return null===(n=e.onFilterChange)||void 0===n?void 0:n.call(e,t.target.value)},focusIndicator:!1,plain:!0,placeholder:"Search People..."})})})}),Q=function(e){var t=Object(o.useState)(""),n=Object(u.a)(t,2),i=n[0],a=n[1],r=Object(B.b)({suspense:!1,staleWhileRevalidate:!0}),l=Object(o.useState)(),s=Object(u.a)(l,2),p=s[0],h=s[1],f=Object(o.useState)(),b=Object(u.a)(f,2),j=b[0],v=b[1],m=r.PeopleMany()||[];return Object(d.jsxs)(c.Box,{style:{flex:1,display:"flex",flexDirection:"column"},children:[Object(d.jsx)(Y,{filter:i,onFilterChange:function(e){return a(e)}}),Object(d.jsx)(c.Box,{flex:!0,round:"xsmall",overflow:"scroll",background:"neutral-1",children:Object(d.jsx)(c.DataTable,{pin:!0,onSort:function(e){var t=e.property,n=e.direction;v(t),h(n)},columns:[{size:"small",property:"id",header:"ID",sortable:!0},{property:"name",header:"Name",sortable:!0}],data:m.filter((function(e){return!(i.length>0)||e.name.toLowerCase().includes(i.toLowerCase())})).sort((function(e,t){return j&&p?"asc"==p?e[j]==t[j]?0:e[j]>t[j]?1:-1:e[j]==t[j]?0:e[j]<t[j]?1:-1:0}))})})]})},V=(n(552),function(e){var t,n,i,a,r=Object(o.useContext)(O),l=r.token,s=r.activeUser,p=Object(o.useState)({start:new Date(q()(new Date).startOf("isoWeek").valueOf()),end:new Date(q()(new Date).add("1","week").valueOf())}),b=Object(u.a)(p,2),j=b[0],v=b[1],m=(Object(B.c)(),Object(B.b)({suspense:!1,staleWhileRevalidate:!1})),x=Object(o.useState)([]),g=Object(u.a)(x,2),S=g[0],k=g[1],_=(null===(t=m.ProjectMany())||void 0===t?void 0:t.map((function(e){return Object(w.a)({},e)})))||[],C=(null===(n=m.PeopleMany())||void 0===n?void 0:n.map((function(e){return Object(w.a)({},e)})))||[],T=(null===(i=m.EquipmentMany())||void 0===i?void 0:i.map((function(e){return Object(w.a)({},e)})))||[],D=(null===(a=m.UserMany)||void 0===a?void 0:a.map((function(e){return Object(w.a)({},e)})))||[],I=Object(B.a)((function(e,t){var n=e.createScheduleItem({item:t.item});return{item:Object(w.a)({},n),error:null}}),{onCompleted:function(e){},onError:function(e){},refetchQueries:[],awaitRefetchQueries:!0,suspense:!1}),E=Object(u.a)(I,2),L=E[0],M=(E[1],Object(B.a)((function(e,t){var n=e.updateScheduleItem({id:t.id,item:t.item});return{item:Object(w.a)({},n),error:null}}),{onCompleted:function(e){},onError:function(e){},refetchQueries:[m.ScheduleMany({startDate:j.start,endDate:j.end})],awaitRefetchQueries:!0,suspense:!1})),z=Object(u.a)(M,2),N=z[0];z[1];return Object(o.useEffect)((function(){F.getScheduleItems({start:j.start,end:j.end},l||"").then((function(e){k(e),console.log("Schedule",e)}))}),[]),console.log("Schedule view",S),Object(d.jsx)(c.Box,{flex:!0,className:"schedule-container",children:Object(d.jsx)(y.c,{date:j.start,onHorizonChanged:function(){var e=Object(f.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Horizon",t,n),v({start:t,end:n}),F.getScheduleItems({start:t,end:n},l||"").then((function(e){k(e),console.log("Schedule",e)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),events:(S||[]).map((function(e){var t,n,o,i,a,r,c,l;return{id:(null===e||void 0===e?void 0:e.id)||"",people:(null===e||void 0===e?void 0:e.people)||[],equipment:(null===e||void 0===e?void 0:e.equipment)||[],project:{name:(null===e||void 0===e||null===(t=e.project)||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toString())||"",id:(null===e||void 0===e||null===(o=e.project)||void 0===o||null===(i=o.id)||void 0===i?void 0:i.toString())||""},notes:(null===e||void 0===e?void 0:e.notes)||[],managers:(null===e||void 0===e?void 0:e.managers)||[],date:null===e||void 0===e?void 0:e.date,owner:{id:(null===e||void 0===e||null===(a=e.owner)||void 0===a||null===(r=a.id)||void 0===r?void 0:r.toString())||"",name:(null===e||void 0===e||null===(c=e.owner)||void 0===c||null===(l=c.name)||void 0===l?void 0:l.toString())||""}}})),onCreateItem:function(e,t){L({args:{item:Object(w.a)(Object(w.a)({},e),{},{date:new Date(t.valueOf())})}}).then(function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F.getScheduleItems({start:j.start,end:j.end},l||"").then((function(e){k(e),console.log("Schedule",e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onSaveItem:function(e,t){N({args:{id:e.id,item:{project:e.project,people:e.people,equipment:e.equipment,notes:e.equipment}}}).then((function(e){}))},onCloneItem:function(e,t,n){},user:s,users:D,projects:_||[],people:C,equipment:T,isLoading:!1})})}),J=(n(553),function(e){var t=Object(o.useState)([]),n=Object(u.a)(t,2),i=(n[0],n[1],Object(o.useState)({number:"",email:""})),a=Object(u.a)(i,2),r=(a[0],a[1],Object(o.useState)(!1)),l=Object(u.a)(r,2);l[0],l[1];return Object(d.jsxs)("div",{className:"employee-view",children:[Object(d.jsx)("div",{className:"employee-top"}),Object(d.jsx)(c.Box,{className:"employee-schedule",children:Object(d.jsx)("div",{className:"employee-schedule-view"})})]})}),X=(n(554),function(e){return Object(d.jsx)(c.Box,{focusIndicator:!1,align:"center",pad:{horizontal:"xsmall"},margin:{bottom:"xsmall"},round:"xsmall",height:"50px",direction:"row",background:"accent-1",children:Object(d.jsx)(c.Box,{flex:!0,round:"xsmall",background:"#ffffff42",children:Object(d.jsx)(c.TextInput,{plain:!0,value:e.filter,onChange:function(t){var n;return null===(n=e.onFilterChange)||void 0===n?void 0:n.call(e,t.target.value)},focusIndicator:!1,placeholder:"Search Equipment..."})})})}),G=function(e){var t=Object(o.useState)(""),n=Object(u.a)(t,2),i=n[0],a=n[1],r=Object(B.b)({suspense:!1,staleWhileRevalidate:!0}),l=Object(o.useState)(),s=Object(u.a)(l,2),p=s[0],h=s[1],f=Object(o.useState)(),b=Object(u.a)(f,2),j=b[0],v=b[1],m=(null===r||void 0===r?void 0:r.EquipmentMany())||[];return Object(d.jsxs)(c.Box,{flex:!0,className:"plants-page",children:[Object(d.jsx)(X,{filter:i,onFilterChange:function(e){return a(e)}}),Object(d.jsx)(c.Box,{round:"xsmall",overflow:"scroll",flex:!0,background:"neutral-1",children:Object(d.jsx)(c.DataTable,{pin:!0,onSort:function(e){var t=e.property,n=e.direction;v(t),h(n)},onClickRow:function(e){},columns:[{property:"id",header:"ID",size:"small",sortable:!0},{property:"name",header:"Name",sortable:!0},{property:"registration",header:"Registration",sortable:!0},{property:"status",header:"Status",sortable:!0}],data:m.filter((function(e){if(i.length>0){var t,n,o=(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toLowerCase())||"",a=(null===e||void 0===e||null===(n=e.registration)||void 0===n?void 0:n.toLowerCase())||"",r="".concat(null===e||void 0===e?void 0:e.id).toLowerCase()||"",c=i.toLowerCase()||"";return a.indexOf(c)>-1||(null===o||void 0===o?void 0:o.indexOf(c))>-1||(null===r||void 0===r?void 0:r.indexOf(c))>-1||"".concat(r," ").concat(o).indexOf(c)>-1}return!0})).sort((function(e,t){return j&&p?"asc"==p?e[j]==t[j]?0:e[j]>t[j]?1:-1:e[j]==t[j]?0:e[j]<t[j]?1:-1:0}))})})]})},$=function(e){var t,n,o;return Object(d.jsxs)(c.Box,{pad:{horizontal:"xsmall"},align:"center",margin:{bottom:"xsmall"},round:"xsmall",height:"50px",direction:"row",gap:"xsmall",background:"accent-1",children:[Object(d.jsx)(c.Box,{flex:!0,round:"xsmall",background:"#ffffff42",children:Object(d.jsx)(c.TextInput,{value:null===(t=e.filter)||void 0===t?void 0:t.search,onChange:function(t){var n;return null===(n=e.onFilterChange)||void 0===n?void 0:n.call(e,{search:t.target.value})},focusIndicator:!1,plain:!0,placeholder:"Search Quotes"})}),Object(d.jsx)(c.Box,{round:"xsmall",background:"#ffffff42",children:Object(d.jsx)(c.Select,{value:null===(n=e.filter)||void 0===n?void 0:n.status,onChange:function(t){var n,o,i=t.option;return null===(n=e.onFilterChange)||void 0===n?void 0:n.call(e,{search:null===(o=e.filter)||void 0===o?void 0:o.search,status:i})},plain:!0,placeholder:"Status",options:["All"].concat(Array.from(new Set(null===(o=e.quotes)||void 0===o?void 0:o.filter((function(e){return void 0!=e})).map((function(e){return e.status||""})))))})})]})},Z=(n(555),new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"})),ee=function(e){var t,n=Object(o.useState)({}),i=Object(u.a)(n,2),a=i[0],r=i[1],l=Object(o.useState)(),s=Object(u.a)(l,2),p=s[0],h=s[1],f=Object(o.useState)(),b=Object(u.a)(f,2),j=b[0],v=b[1],m=[{property:"id",header:"Quote ID",sortable:!0,size:"small",primary:!0},{property:"name",header:"Quote Name",sortable:!0,size:"large"},{property:"status",header:"Status",sortable:!0,size:"small"},{property:"price",header:"Total Value",render:function(e){return Z.format(e.price)},sortable:!0,size:"small",align:"start"}],x=null===(t=Object(B.b)({suspense:!1,staleWhileRevalidate:!0}).QuoteMany())||void 0===t?void 0:t.map((function(e){return Object(w.a)(Object(w.a)({},e),{},{id:parseInt((null===e||void 0===e?void 0:e.id)||"0")})}));Object(o.useEffect)((function(){}),[]);return Object(d.jsxs)(c.Box,{direction:"column",flex:!0,children:[Object(d.jsx)($,{quotes:x||[],filter:a,onFilterChange:function(e){return r(e)}}),Object(d.jsx)(c.Box,{flex:!0,overflow:{vertical:"auto"},round:"xsmall",background:"neutral-1",children:Object(d.jsx)(c.DataTable,{pin:!0,onSort:function(e){var t=e.property,n=e.direction;v(t),h(n)},sort:j&&p?{property:j,external:!0,direction:p}:void 0,columns:m,data:null===x||void 0===x?void 0:x.filter((function(e){if(a.status&&"All"!=a.status)return e.status===a.status;if(a.search){var t,n=(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toLowerCase())||"",o="".concat(null===e||void 0===e?void 0:e.id).toLowerCase()||"",i=a.search.toLowerCase()||"";return(null===n||void 0===n?void 0:n.indexOf(i))>-1||(null===o||void 0===o?void 0:o.indexOf(i))>-1||"".concat(o," ").concat(n).indexOf(i)>-1}return!0})).sort((function(e,t){return j&&p?"asc"==p?e[j]==t[j]?0:e[j]>t[j]?1:-1:e[j]==t[j]?0:e[j]<t[j]?1:-1:0})).map((function(e){new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return Object(w.a)(Object(w.a)({},e),{},{price:e.price})}))})})]})},te=i.a.lazy((function(){return n.e(4).then(n.bind(null,592))})),ne=function(e){var t=[],n=window.location.pathname.replace(e.match.url,"");return console.log(e.match),Object(d.jsxs)("div",{className:"dashboard",children:[Object(d.jsx)(y.e,{onLogoClick:function(){window.location.href="/dashboard"},logo:Object(d.jsx)(C,{style:{filter:"invert(1)"}}),active:n,menu:function(){var e=[];return e=[{icon:Object(d.jsx)(S,{}),label:"Schedule",component:Object(d.jsx)(d.Fragment,{children:" "})},{icon:Object(d.jsx)(E,{}),label:"Timeline",component:Object(d.jsx)(d.Fragment,{})},{icon:Object(d.jsx)(_,{}),label:"Quotes",component:Object(d.jsx)(d.Fragment,{})},{icon:Object(d.jsx)(D,{}),label:"Projects",component:Object(d.jsx)(d.Fragment,{})},{icon:Object(d.jsx)(T,{}),label:"People",component:Object(d.jsx)(d.Fragment,{})},{icon:Object(d.jsx)(k,{}),label:"Equipment",alerts:t.length,component:Object(d.jsx)(d.Fragment,{})}],e}(),onSelect:function(t){var n=Object(s.e)("".concat(e.match.url,":path"),{path:t.toLowerCase()});e.history.push(n)}}),Object(d.jsx)(c.Box,{background:"neutral-4",flex:!0,pad:"xsmall",children:Object(d.jsx)(i.a.Suspense,{fallback:Object(d.jsxs)(c.Box,{align:"center",justify:"center",flex:!0,children:[Object(d.jsx)(c.Spinner,{size:"medium"}),Object(d.jsx)(c.Text,{children:"Loading ..."})]}),children:Object(d.jsxs)(s.c,{children:[Object(d.jsx)(s.a,{path:"/schedule",component:V}),Object(d.jsx)(s.a,{path:"/projects",exact:!0,component:M}),Object(d.jsx)(s.a,{path:"/projects/:id",component:K}),Object(d.jsx)(s.a,{path:"/quotes",exact:!0,component:ee}),Object(d.jsx)(s.a,{path:"/people",exact:!0,component:Q}),Object(d.jsx)(s.a,{path:"/people/:id",component:J}),Object(d.jsx)(s.a,{path:"/equipment",exact:!0,component:G}),Object(d.jsx)(s.a,{path:"/timeline",component:te})]})})})]})},oe={global:{colors:{brand:"#55556B","light-1":"#EAD9CE","dark-1":"#003f49","neutral-1":"#F3E6DC","neutral-2":"#D6B8A7","neutral-3":"#605755","neutral-4":"#383232","accent-1":"#A3B696","accent-2":"#65695C","accent-3":"",placeholder:"#383232"}},tabs:{panel:{extend:"display: flex; flex-direction: column;"}},dataTable:{header:{background:"accent-2"},pinned:{header:{background:"accent-2"}}},select:{options:{container:{background:"#ffffff69"}}},layer:{background:"neutral-2"}};var ie=function(){return console.log("/dashboard/flow"),Object(d.jsx)(g,{authorizationServer:"https://api.hexhive.io",clientId:"hexhive.io",clientSecret:"tester",redirectUri:"https://hexhive.io/dashboard/flow",children:Object(d.jsx)(c.Grommet,{themeMode:"dark",plain:!0,theme:oe,children:Object(d.jsx)(l.a,{basename:"/dashboard/flow",children:Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(s.a,{path:"/",component:ne})})})})})},ae=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,591)).then((function(t){var n=t.getCLS,o=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),o(e),i(e),a(e),r(e)}))};r.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(ie,{})}),document.getElementById("root")),ae()},60:function(e,t,n){"use strict";n(7),n(38);var o=n(102);n.d(t,"a",(function(){return o.a})),n.d(t,"b",(function(){return o.b}))}},[[560,1,2]]]);
//# sourceMappingURL=main.3fce9872.chunk.js.map