(this["webpackJsonp@hexhive-apps/flow"]=this["webpackJsonp@hexhive-apps/flow"]||[]).push([[4],{592:function(e,t,n){"use strict";n.r(t);var a=n(7),o=n(4),r=n(0),i=n(56),c=n(78),l=n.n(c),s=n(60),d=n(2),u=n(34),f=n(1),b=function(e){return Object(f.jsxs)(d.Box,{round:"xsmall",background:"accent-1",pad:"xsmall",direction:"row",align:"center",justify:"between",children:[Object(f.jsx)(d.Text,{weight:"bold",children:"Timeline"}),Object(f.jsx)(d.Box,{background:"#ffffff42",round:"xsmall",children:Object(f.jsx)(d.Select,{placeholder:"View",plain:!0,value:e.view||"Projects",onChange:function(t){var n,a=t.option;null===(n=e.onViewChange)||void 0===n||n.call(e,a)},options:["Projects","Estimates"]})})]})},v=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});t.default=function(e){var t,n=Object(r.useState)("Projects"),c=Object(o.a)(n,2),j=c[0],O=c[1],w=Object(r.useState)(new Date),m=Object(o.a)(w,2),p=m[0],h=m[1],x=Object(r.useState)(),g=Object(o.a)(x,2),D=g[0],y=g[1],k=Object(r.useState)([{id:3,color:"purple",name:"Test",start:new Date(2021,2,12),end:new Date(2021,5,9)},{id:2,color:"orange",name:"Test",start:new Date(2021,7,12),end:new Date(2021,12,9)}]),S=Object(o.a)(k,2),I=S[0],T=(S[1],null===(t=Object(u.b)({suspense:!1,staleWhileRevalidate:!0}).QuoteMany())||void 0===t?void 0:t.map((function(e){return Object(a.a)(Object(a.a)({start:new Date(l()(null===e||void 0===e?void 0:e.date).startOf("isoWeek").valueOf()),end:new Date(l()(null===e||void 0===e?void 0:e.date).endOf("isoWeek").valueOf())},e),{},{showLabel:v.format(e.price),color:Object(s.b)((null===e||void 0===e?void 0:e.name)||"")})})));Object(r.useEffect)((function(){}),[]),Object(r.useEffect)((function(){l()(null===D||void 0===D?void 0:D.start).get("year")!=l()(p).get("year")&&(null===D||void 0===D?void 0:D.start)&&h(null===D||void 0===D?void 0:D.start)}),[null===D||void 0===D?void 0:D.start]);var W=function(){return D&&D.start&&D.end?null===T||void 0===T?void 0:T.filter((function(e){return e.start<D.start&&e.end>D.end||e.start>D.start&&e.start<D.end||e.end>D.start&&e.end<D.end})):I};return Object(f.jsxs)(d.Box,{flex:!0,gap:"xsmall",direction:"column",children:[Object(f.jsx)(b,{view:j,onViewChange:function(e){return O(e)}}),Object(f.jsx)(d.Box,{overflow:"hidden",flex:!0,round:"small",children:Object(f.jsx)(i.f,{resizable:!0,mode:"month",links:[],data:function(){var e,t=null===(e=W())||void 0===e?void 0:e.reduce((function(e,t){console.log(t);var n=t.start.getTime();return e[n]||(e[n]=0),e[n]+=t.price,e}),{});return console.log(t),Object.keys(t).map((function(e,n){return{id:e,name:"Week ".concat(l()(new Date(parseInt(e))).format("W")),color:Object(s.b)(l()(new Date(parseInt(e))).format("DD/mm/yyyy")),start:new Date(parseInt(e)),end:new Date(l()(new Date(parseInt(e))).add(7,"days").valueOf()),showLabel:v.format(t[e])}}))}(),date:p,onHorizonChange:function(e,t){console.log("Horizon",e,t),y({start:e,end:t})},itemheight:30})})]})}}}]);
//# sourceMappingURL=4.a4c7d284.chunk.js.map